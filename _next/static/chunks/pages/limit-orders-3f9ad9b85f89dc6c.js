(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4576],{84120:function(a,b,c){(window.__NEXT_P=window.__NEXT_P||[]).push(["/limit-orders",function(){return c(4285)}])},16863:function(c,b,a){"use strict";var d=a(26042),e=a(69396),f=a(85893);a(67294);var g=a(17058);b.Z=function(a){return(0,f.jsx)(g.Z,(0,e.Z)((0,d.Z)({viewBox:"0 0 24 24"},a),{children:(0,f.jsx)("path",{d:"M5 13H16.17L11.29 17.88C10.9 18.27 10.9 18.91 11.29 19.3C11.68 19.69 12.31 19.69 12.7 19.3L19.29 12.71C19.68 12.32 19.68 11.69 19.29 11.3L12.71 4.7C12.32 4.31 11.69 4.31 11.3 4.7C10.91 5.09 10.91 5.72 11.3 6.11L16.17 11H5C4.45 11 4 11.45 4 12C4 12.55 4.45 13 5 13Z"})}))}},85462:function(c,b,a){"use strict";var d=a(26042),e=a(69396),f=a(85893);a(67294);var g=a(17058);b.Z=function(a){return(0,f.jsxs)(g.Z,(0,e.Z)((0,d.Z)({viewBox:"0 0 24 24"},a),{children:[(0,f.jsx)("path",{d:"M5 7C5 6.44772 4.55228 6 4 6C3.44772 6 3 6.44772 3 7V18C3 19.1046 3.89543 20 5 20H20C20.5523 20 21 19.5523 21 19C21 18.4477 20.5523 18 20 18H5V7Z"}),(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M19 17H7C6.44772 17 6 16.5523 6 16V12C6 11.4477 6.44772 11 7 11H10V10C10 9.44772 10.4477 9 11 9H14V7C14 6.44772 14.4477 6 15 6H19C19.5523 6 20 6.44772 20 7V16C20 16.5523 19.5523 17 19 17ZM16 8H18V15H16V8ZM12 15H14V11H12V15ZM10 13H8V15H10V13Z"})]}))}},16883:function(c,b,a){"use strict";var d=a(26042),e=a(69396),f=a(85893);a(67294);var g=a(17058);b.Z=function(a){return(0,f.jsxs)(g.Z,(0,e.Z)((0,d.Z)({viewBox:"0 0 23 22"},a),{children:[(0,f.jsx)("path",{d:"M21.5 1l-20 20",strokeWidth:2,stroke:"currentColor",strokeLinecap:"round"}),(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7.033 19H19.5a1 1 0 100-2H9.033l-2 2zm3-3H18.5a1 1 0 001-1V6.533l-2 2V14h-2v-3.467l-2 2V14h-1.467l-2 2zm.936-8H10.5a1 1 0 00-1 1v.469L10.969 8zm-2 2L5.5 13.469V11a1 1 0 011-1h2.469zM4.5 14.469l-2 2V6a1 1 0 012 0v8.469z"})]}))}},158:function(h,c,a){"use strict";a.d(c,{Td:function(){return g},Th:function(){return j}});var i=a(7297),b=a(87379),d=a(57247);function e(){var a=(0,i.Z)(["\n  border-bottom: 1px solid ",";\n  color: ",";\n  padding: 16px;\n  vertical-align: middle;\n\n  ","\n"]);return e=function(){return a},a}function f(){var a=(0,i.Z)(["\n  color: ",";\n  font-size: 12px;\n  text-transform: uppercase;\n"]);return f=function(){return a},a}var g=b.ZP.td.withConfig({componentId:"sc-bb42f194-0"}).withConfig({componentId:"sc-efd1a497-0"})(e(),function(a){return a.theme.colors.cardBorder},function(a){return a.theme.colors.text},d.cp),j=(0,b.ZP)(g).attrs({as:"th"}).withConfig({componentId:"sc-bb42f194-1"}).withConfig({componentId:"sc-efd1a497-1"})(f(),function(a){return a.theme.colors.secondary})},48993:function(h,b,a){"use strict";var i=a(7297),c=a(87379),d=a(57247),e=a(158);function f(){var a=(0,i.Z)(["\n  max-width: 100%;\n  width: 100%;\n\n  tbody tr:last-child {\n    "," {\n      border-bottom: 0;\n    }\n  }\n\n  ","\n"]);return f=function(){return a},a}var g=c.ZP.table.withConfig({componentId:"sc-de63d9a6-0"}).withConfig({componentId:"sc-1973a7f6-0"})(f(),e.Td,d.Dh);b.Z=g},9989:function(f,b,a){"use strict";var g=a(26042),h=a(69396),i=a(7297),j=a(85893),k=a(67294),c=a(9355),l=a(59750),m=a(7180),n=a(97114),o=a(4318),p=a(19731),q=a(96293),r=a(99150),d=a(87379);function e(){var a=(0,i.Z)(["\n  background: ",";\n  padding-bottom: 24px;\n  padding-top: 24px;\n"]);return e=function(){return a},a}var s=(0,d.ZP)(c.xB).withConfig({componentId:"sc-1a56363d-0"})(e(),function(a){return a.theme.colors.gradients.bubblegum});b.Z=function(a){var e=a.id,t=a.onSuccess,u=a.onDismiss,v=a.checks,w=a.header,f=a.subtitle,i=(0,k.useState)(v||[]),b=i[0],y=i[1],d=(0,r.$G)().t,z=(0,k.useCallback)(function(a){y(b.map(function(b){return a===b.key?(0,h.Z)((0,g.Z)({},b),{value:!b.value}):b}))},[b]),x=(0,k.useCallback)(function(){t(),u()},[t,u]);return(0,j.jsxs)(c.F0,{title:d("Welcome!"),minWidth:"320px",id:e,children:[(0,j.jsx)(s,{children:(0,j.jsx)(c.r6,{children:(0,j.jsx)(l.Z,{scale:"lg",children:d("Welcome!")})})}),(0,j.jsxs)(c.fe,{p:"24px",maxWidth:["100%","100%","100%","400px"],children:[(0,j.jsxs)(m.Z,{maxHeight:"300px",overflowY:"auto",children:[(0,j.jsx)(l.Z,{as:"h3",mb:"24px",children:w}),f&&(0,j.jsx)(n.Z,{as:"p",color:"textSubtle",mb:"24px",children:f}),b.map(function(a){return(0,j.jsx)("label",{htmlFor:a.key,style:{display:"block",cursor:"pointer",marginBottom:"24px"},children:(0,j.jsxs)(o.Z,{alignItems:"center",children:[(0,j.jsx)("div",{style:{flex:"none",alignSelf:"flex-start",paddingTop:"8px"},children:(0,j.jsx)(p.Z,{id:a.key,scale:"sm",checked:a.value,onChange:function(){return z(a.key)}})}),(0,j.jsx)(n.Z,{ml:"8px",children:a.content})]})},a.key)})]}),(0,j.jsx)(q.Z,{id:"".concat(e,"-continue"),width:"100%",onClick:x,disabled:b.some(function(a){return!a.value}),children:d("Continue")})]})]})}},118:function(m,d,a){"use strict";a.r(d),a.d(d,{default:function(){return N}});var b,e,n,o,p,q=a(26042),r=a(10253),s=a(7297),t=a(85893),u=a(37519),v=a(99150),c=a(87379),f=a(38144),g=a(4318),h=a(7180),w=a(36544),x=a(97114),y=a(82035),z=a(68605),A=a(47568),i=a(34051),B=a.n(i),C=a(67294),D=a(28687),E=a(65684),F=a(85906),G=a(27892);function H(){var a=(0,s.Z)(['\n            query getNftMarketSubgraphHealth {\n              indexingStatusForCurrentVersion(subgraphName: "','") {\n                synced\n                health\n                chains {\n                  chainHeadBlock {\n                    number\n                  }\n                  latestBlock {\n                    number\n                  }\n                }\n              }\n            }\n          ']);return H=function(){return a},a}(b=e||(e={}))[b.OK=0]="OK",b[b.WARNING=1]="WARNING",b[b.NOT_OK=2]="NOT_OK",b[b.UNKNOWN=3]="UNKNOWN";var I=function(b){var a=(0,C.useState)({status:e.UNKNOWN,currentBlock:0,chainHeadBlock:0,latestBlock:0,blockDifference:0}),c=a[0],d=a[1];return(0,G.X)(function(c){var a;(a=(0,A.Z)(B().mark(function a(){var f,g,h,i,j,k,l,m;return B().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.t0=r.Z,a.next=4,Promise.all([(0,D.request)(F.AM,(0,D.gql)(H(),b)),c?Promise.resolve(c):E.U6.getBlockNumber(),]);case 4:a.t1=a.sent,g=(f=(0,a.t0)(a.t1,2))[0].indexingStatusForCurrentVersion,h=f[1],i="healthy"===g.health,j=parseInt(g.chains[0].chainHeadBlock.number),k=parseInt(g.chains[0].latestBlock.number),l=h-k,m=h-j,!i||l>200||m>200?d({status:e.NOT_OK,currentBlock:h,chainHeadBlock:j,latestBlock:k,blockDifference:l}):l>50||m>50?d({status:e.WARNING,currentBlock:h,chainHeadBlock:j,latestBlock:k,blockDifference:l}):d({status:e.OK,currentBlock:h,chainHeadBlock:j,latestBlock:k,blockDifference:l}),a.next=19;break;case 16:a.prev=16,a.t2=a.catch(0),console.error("Failed to perform health check for ".concat(b," subgraph"),a.t2);case 19:case"end":return a.stop()}},a,null,[[0,16]])})),function(){return a.apply(this,arguments)})()},[b]),c};function j(){var a=(0,s.Z)(["\n  border-radius: 8px;\n  > div {\n    border-radius: 8px;\n  }\n  user-select: none;\n"]);return j=function(){return a},a}function k(){var a=(0,s.Z)(["\n  gap: 7px;\n"]);return k=function(){return a},a}function l(){var a=(0,s.Z)(["\n  width: 12px;\n  height: 12px;\n  border-radius: 50%;\n  background: ",";\n"]);return l=function(){return a},a}var J=(0,c.ZP)(f.Z).withConfig({componentId:"sc-d34ee9f5-0"})(j()),K=(0,c.ZP)(g.Z).withConfig({componentId:"sc-d34ee9f5-1"})(k()),L=(0,c.ZP)(h.Z).withConfig({componentId:"sc-d34ee9f5-2"})(l(),function(a){var b=a.$color,c=a.theme;return c.colors[b]}),M=function(a){var e=a.color,f=a.label,g=a.description,c=a.currentBlock,i=a.secondRemainingBlockSync,d=a.blockNumberFromSubgraph,b=(0,v.$G)().t;return(0,t.jsxs)(h.Z,{children:[(0,t.jsxs)(K,{pb:"10px",children:[(0,t.jsx)(L,{$color:e}),(0,t.jsx)(x.Z,{children:f})]}),(0,t.jsx)(x.Z,{pb:"24px",children:g}),(0,t.jsxs)(x.Z,{children:[(0,t.jsxs)("strong",{children:[b("Chain Head Block"),":"]})," ",c]}),(0,t.jsxs)(x.Z,{children:[(0,t.jsxs)("strong",{children:[b("Latest Subgraph Block"),":"]})," ",d]}),(0,t.jsxs)(x.Z,{children:[(0,t.jsxs)("strong",{children:[b("Delay"),":"]})," ",c-d," (",i,"s)"]})]})},N=function(d){var a,b,j,B=d.subgraphName,C=d.inline,D=d.customDescriptions,E=d.obeyGlobalSetting,F=(0,v.$G)().t,f=I(B),g=f.status,k=f.currentBlock,G=f.blockDifference,l=f.latestBlock,H=(0,r.Z)((0,z.YF)(),1),N=H[0],O=g===e.WARNING||g===e.NOT_OK,P=(a=F,b=D,{delayed:{label:a("Delayed"),color:"failure",description:null!==(n=null==b?void 0:b.delayed)&& void 0!==n?n:a("Subgraph is currently experiencing delays due to MOVO issues. Performance may suffer until subgraph is restored.")},slow:{label:a("Slight delay"),color:"warning",description:null!==(o=null==b?void 0:b.slow)&& void 0!==o?o:a("Subgraph is currently experiencing delays due to MOVO issues. Performance may suffer until subgraph is restored.")},healthy:{label:a("Fast"),color:"success",description:null!==(p=null==b?void 0:b.healthy)&& void 0!==p?p:a("No issues with the subgraph.")}}),Q=G*u.Wx,c=P[(j=g)===e.NOT_OK?"delayed":j===e.WARNING?"slow":"healthy"],i=(0,w.Z)((0,t.jsx)(M,(0,q.Z)({currentBlock:k,secondRemainingBlockSync:Q,blockNumberFromSubgraph:l},c)),{placement:"top"}),m=i.targetRef,s=i.tooltipVisible,A=i.tooltip;return l&&k&&(E&&N||O)?C?(0,t.jsxs)(K,{alignItems:"center",justifyContent:"flex-end",ref:m,children:[(0,t.jsx)(L,{$color:c.color}),(0,t.jsx)(x.Z,{children:c.label}),(0,t.jsx)(y.Z,{}),s&&A]}):(0,t.jsxs)(h.Z,{position:"fixed",bottom:"55px",right:"5%",ref:m,"data-test":"subgraph-health-indicator",children:[s&&A,(0,t.jsx)(J,{children:(0,t.jsxs)(K,{alignItems:"center",p:"10px",children:[(0,t.jsx)(L,{$color:c.color}),(0,t.jsx)(x.Z,{children:c.label}),(0,t.jsx)(y.Z,{})]})})]}):null}},4285:function(I,k,a){"use strict";a.r(k),a.d(k,{default:function(){return ce}});var l,m,d,e,n,J=a(85893),K=a(47568),L=a(82670),M=a(10253),q=a(34051),N=a.n(q),c=a(67294),O=a(11163),P=a(54346),Q=a(98946),R=a(65528),f=a(4318),r=a(7180),S=a(96293),T=a(80421),U=a(67653),V=a(99150),W=a(41914),X=a(19527),Y=a(45460),Z=a(30621),h=a(14924),s=a(39499),$=a.n(s),_=a(9473),aa=a(19838),ab=a(64011),ac=a(53854),ad=a(86435),ae=a(23715),af=function(a,b){if(!(!a||!b||a.equalTo(0)||b.equalTo(0)))return new P.tA(a.currency,b.currency,a.raw,b.raw)},ag=a(93293),ah=a(97938),ai=a(71900),aj=a(90542),ak=a(37621),al=a(31318),am=function(f,i,a,b,c){if(f&&a&&b){var d=(0,ah.Z)(f,c?a:b),e=(0,ah.Z)(i,c?a:b);if(d&&e){if(c){var g=d.asFraction.multiply(e.asFraction).multiply($().exponentiate(aa.TY,$().BigInt(a.decimals)));return(0,L.Z)(a,P.WU)?new P.dt(a,g.toFixed(0)):P.ih.ether(g.toFixed(0))}var h=d.asFraction.divide(e.asFraction).multiply($().exponentiate(aa.TY,$().BigInt(a.decimals)));return(0,L.Z)(a,P.WU)?new P.dt(a,h.quotient.toString()):P.ih.ether(h.quotient.toString())}}},an=function(f,i,b,a,c){if(f&&b&&a){var d=(0,ah.Z)(f,c?a:b),e=(0,ah.Z)(i,c?b:a);if(e&&d){if(c){var g=d.asFraction.multiply($().exponentiate(aa.TY,$().BigInt(a.decimals))).divide(e.asFraction);return(0,L.Z)(a,P.WU)?new P.dt(a,g.toFixed(0)):P.ih.ether(g.toFixed(0))}var h=d.asFraction.multiply(e.asFraction).multiply($().exponentiate(aa.TY,$().BigInt(a.decimals)));return(0,L.Z)(a,P.WU)?new P.dt(a,h.quotient.toString()):P.ih.ether(h.quotient.toString())}}},ao=function(){return(0,_.v9)(function(a){return a.limitOrders})},ap=function(){var a=(0,_.I0)(),b=(0,c.useCallback)(function(c,b){a((0,aj.j)({field:c,currencyId:(0,L.Z)(b,P.WU)?b.address:b===P.c0?"MOVO":""}))},[a]),d=(0,c.useCallback)(function(){a((0,aj.KS)())},[a]),e=(0,c.useCallback)(function(b,c){a((0,aj.LC)({field:b,typedValue:c}))},[a]),f=(0,c.useCallback)(function(b){a((0,aj.sN)({rateType:b}))},[a]);return{onSwitchTokens:d,onCurrencySelection:b,onUserInput:e,onChangeRateType:f}},aq=function(h,d,f,e,b,a,c,g){if(!h)return"Connect Wallet";if(d.input&&d.output&&d.input.address.toLowerCase()===d.output.address.toLowerCase())return"Order not allowed";if(!(f.input&&f.output))return"Select a token";var i=b.input||b.output,j=!a||!(null==a?void 0:a.route);if(i&&j)return"Insufficient liquidity for this trade";if(!b.input||!b.output)return"Enter an amount";if(e.input&&e.input.lessThan(b.input))return"Insufficient ".concat(e.input.currency.symbol," balance");if(c){if(g===ak.j.MUL&&(c.lessThan(a.executionPrice.asFraction)||c.equalTo(a.executionPrice.asFraction)))return"Only possible to place sell orders above market rate";if(g===ak.j.DIV&&(c.invert().greaterThan(a.executionPrice.invert().asFraction)||c.invert().equalTo(a.executionPrice.invert().asFraction)))return"Only possible to place buy orders below market rate"}},ar=function(){var u,v,w,x,y,z,A,B,C,D,o,F=(0,ab.Z)(),E=F.account,O=F.chainId,d=ao(),p=d.independentField,P=d.basisField,f=d.typedValue,Q=d[ak.g.INPUT],G=Q.currencyId,R=d[ak.g.OUTPUT],H=R.currencyId,q=d.rateType,k=d.inputValue,l=d.outputValue,b=(0,ad.U8)(G),a=(0,ad.U8)(H),g=(0,c.useMemo)(function(){return{input:null!=b?b:void 0,output:null!=a?a:void 0}},[b,a]),r=(0,c.useMemo)(function(){return{input:(0,ac.pu)(g.input,O),output:(0,ac.pu)(g.output,O)}},[g.input,g.output,O]),I=(0,ai.K5)(null!=E?E:void 0,[null!=b?b:void 0,null!=a?a:void 0,]),J={input:I[0],output:I[1]},S=(0,c.useMemo)(function(){return(0,ah.Z)(k,null!=b?b:void 0)},[k,b]),K=(0,c.useMemo)(function(){return(0,ah.Z)(l,null!=a?a:void 0)},[l,a]),m=p===ak.g.INPUT,n=P===ak.g.OUTPUT,i=p===ak.g.PRICE,s=i?an(k,f,b,a,q===ak.j.DIV):void 0,T=i?am(l,f,b,a,q===ak.j.DIV):void 0,U=i&&s?null==s?void 0:s.toSignificant(6):f,V=i?void 0:(0,ah.Z)(f,null!==(z=m?b:a)&& void 0!==z?z:void 0),L=i?n?K:(0,ah.Z)(U,a):(0,ah.Z)(f,m?b:a),W=(0,ae.AU)(m?L:void 0,a),X=(0,ae.in)(b,!m||n?L:void 0),t=m?W:X,Y=(0,ah.Z)("1",g.input),M=(0,ae.AU)(Y,g.output),N=parseFloat(null==M?void 0:null===(u=M.executionPrice)|| void 0===u?void 0:u.toSignificant(6)),e=(0,c.useMemo)(function(){var b,a=null==t?void 0:t.inputAmount;return n?p===ak.g.INPUT?a=V:i&&(a=T):a=S,b=n?K:p===ak.g.OUTPUT?V:i?s:null==t?void 0:t.outputAmount,{input:a,output:b}},[p,V,S,K,t,i,n,T,s,]),j=(0,c.useMemo)(function(){return af(e.input,e.output)},[e.input,e.output]),Z={input:!n&&k&&""!==k?k:null!==(A=null===(v=e.input)|| void 0===v?void 0:v.toSignificant(6))&& void 0!==A?A:"",output:n&&l&&""!==l?l:null!==(B=null===(w=e.output)|| void 0===w?void 0:w.toSignificant(6))&& void 0!==B?B:"",price:p===ak.g.PRICE?f:q===ak.j.MUL?null!==(C=null==j?void 0:j.toSignificant(6))&& void 0!==C?C:"":null!==(D=null==j?void 0:j.invert().toSignificant(6))&& void 0!==D?D:""},_=(0,c.useMemo)(function(){var c,d;return{input:b?null===(c=e.input)|| void 0===c?void 0:c.multiply($().exponentiate(aa.TY,$().BigInt(b.decimals))).toFixed(0):void 0,output:a?null===(d=e.output)|| void 0===d?void 0:d.multiply($().exponentiate(aa.TY,$().BigInt(a.decimals))).toFixed(0):void 0}},[b,a,e]);return{currencies:g,currencyBalances:J,inputError:aq(E,r,g,J,e,t,j,q),formattedAmounts:Z,trade:null!=t?t:void 0,parsedAmounts:e,price:j,rawAmounts:_,wrappedCurrencies:r,singleTokenPrice:(o={},(0,h.Z)(o,null===(x=r.input)|| void 0===x?void 0:x.address,N),(0,h.Z)(o,null===(y=r.output)|| void 0===y?void 0:y.address,1/N),o),currencyIds:{input:G,output:H}}};function as(a){return"string"==typeof a&&"output"===a.toLowerCase()?ak.g.OUTPUT:ak.g.INPUT}function at(a){if("string"==typeof a){var b=(0,ag.UJ)(a);if(b)return b;if("MOVO"===a.toUpperCase()|| !1===b)return"MOVO"}return""}var g,i,au=function(b){var a,c,d=at(b.inputCurrency)||aa.VN,e=at(b.outputCurrency)||aa.g$;return d===e&&("string"==typeof b.outputCurrency?d="":e=""),a={},(0,h.Z)(a,ak.g.INPUT,{currencyId:d}),(0,h.Z)(a,ak.g.OUTPUT,{currencyId:e}),(0,h.Z)(a,"inputValue",""),(0,h.Z)(a,"outputValue",""),(0,h.Z)(a,"typedValue","string"!=typeof(c=b.exactAmount)||Number.isNaN(parseFloat(c))?"":c),(0,h.Z)(a,"independentField",as(b.exactField)),(0,h.Z)(a,"basisField",as(b.exactField)),(0,h.Z)(a,"rateType",ak.j.MUL),a},av=function(){var b=(0,ab.Z)().chainId,d=(0,al.TL)(),e=(0,O.useRouter)().query,a=(0,c.useState)(),f=a[0],g=a[1];return(0,c.useEffect)(function(){if(b){var a=au(e);d((0,aj.sQ)(a)),g({inputCurrencyId:a[ak.g.INPUT].currencyId,outputCurrencyId:a[ak.g.OUTPUT].currencyId})}},[d,b,e]),f},aw=a(26042),ax=a(69396),ay=a(2593),az=a(55892),aA=a(8100),aB=a(29815),aC=a(3862),aD=a(15655),aE=a(19508),t=a(75472),aF=a.n(t);(g=l||(l={}))[g.Open=0]="Open",g[g.History=1]="History",(i=m||(m={})).OPEN="open",i.CANCELLED="cancelled",i.EXECUTED="executed";var aG=["gelato","openOrders"],aH=["gelato","cancelledExecutedOrders"];function aI(a,b){return Number(b.updatedAt)-Number(a.updatedAt)}function aJ(a){return aK.apply(this,arguments)}function aK(){return(aK=(0,K.Z)(N().mark(function a(b){var c,d,e,f,g,h,i,j,k,l,m,n,o;return N().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:c=b.gelatoLimitOrders,d=b.chainId,e=b.account,f=b.orders,g=b.syncStatuses,h=(0,aD.QR)(d,e),i=(0,aD.AG)(h),j=f.filter(function(a){return!i.has((0,aD.r6)(a))}),(0,aD.ZJ)(d,e,j),k=g?h.filter(function(a){return g.some(function(b){return b===a.status})}):[],l=0;case 7:if(!(l<k.length)){a.next=33;break}if(m=k[l],a.prev=9,!(null!==(n=f.find(function(a){return m.id.toLowerCase()===a.id.toLowerCase()}))&& void 0!==n)){a.next=15;break}a.t0=n,a.next=23;break;case 15:if(!c){a.next=21;break}return a.next=18,c.getOrder(m.id);case 18:a.t1=a.sent,a.next=22;break;case 21:a.t1=null;case 22:a.t0=a.t1;case 23:var p,q;o=a.t0,p=m,(q=o)&&Number(p.updatedAt)<Number(q.updatedAt)&&(0,aD.TR)(d,e,o),a.next=30;break;case 27:a.prev=27,a.t2=a.catch(9),console.error("Error fetching order from subgraph",a.t2);case 30:l++,a.next=7;break;case 33:case"end":return a.stop()}},a,null,[[9,27]])}))).apply(this,arguments)}var aL=function(c){var a=(0,ab.Z)(),d=a.account,e=a.chainId,f=(0,aE.Z)(),b=c&&f&&d&&e,g=(0,aA.ZP)(b?aG:null,(0,K.Z)(N().mark(function a(){var b,c,g;return N().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,f.getOpenOrders(d.toLowerCase(),!1);case 3:return b=a.sent,a.next=6,aJ({orders:b,chainId:e,account:d,syncStatuses:[m.OPEN],gelatoLimitOrders:f});case 6:a.next=11;break;case 8:a.prev=8,a.t0=a.catch(0),console.error("Error fetching open orders from subgraph",a.t0);case 11:return c=(0,aD.QR)(e,d).filter(function(a){return a.status===m.OPEN}),g=(0,aD.QR)(e,d,!0),a.abrupt("return",(0,aB.Z)(c.filter(function(a){return!g.filter(function(a){return a.status===m.CANCELLED}).find(function(b){return b.id.toLowerCase()===a.id.toLowerCase()})})).concat((0,aB.Z)(g.filter(function(a){return a.status===m.OPEN}))).sort(aI));case 14:case"end":return a.stop()}},a,null,[[0,8]])})),{refreshInterval:aC.KI}).data;return b?g:[]},aM=function(c){var a=(0,ab.Z)(),d=a.account,e=a.chainId,f=(0,aE.Z)(),b=c&&f&&d&&e,g=(0,aA.ZP)(b?aH:null,(0,K.Z)(N().mark(function a(){var b,c,g,h,i,j,k;return N().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,b=d.toLowerCase(),a.t0=M.Z,a.next=5,Promise.all([f.getCancelledOrders(b,!1),f.getExecutedOrders(b,!1),]);case 5:return a.t1=a.sent,g=(c=(0,a.t0)(a.t1,2))[0],h=c[1],a.next=11,aJ({orders:(0,aB.Z)(g).concat((0,aB.Z)(h)),chainId:e,account:d});case 11:a.next=16;break;case 13:a.prev=13,a.t2=a.catch(0),console.error("Error fetching history orders from subgraph",a.t2);case 16:return i=(0,aD.QR)(e,d).filter(function(a){return a.status===m.EXECUTED}),j=(0,aD.QR)(e,d).filter(function(a){return a.status===m.CANCELLED}),k=(0,aD.QR)(e,d,!0).filter(function(a){return a.status===m.CANCELLED}),a.abrupt("return",(0,aB.Z)(k).concat((0,aB.Z)(j),(0,aB.Z)(i)).sort(aI));case 20:case"end":return a.stop()}},a,null,[[0,13]])})),{refreshInterval:aC.KI}).data;return b?g:[]},aN=function(){var i,j,k,b=(0,ab.Z)(),d=b.chainId,l=b.account,e=(0,aA.kY)().mutate,f=(0,aE.Z)(),g=(0,az.h7)(),a=ap(),m=a.onSwitchTokens,n=a.onCurrencySelection,h=a.onUserInput,o=a.onChangeRateType,p=(0,c.useCallback)((i=(0,K.Z)(N().mark(function a(b,c){var h,i,j,k,l,m;return N().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(f){a.next=2;break}throw Error("Could not reach Gelato Limit Orders library");case 2:if(d){a.next=4;break}throw Error("No chainId");case 4:if(null==f?void 0:f.signer){a.next=6;break}throw Error("No signer");case 6:return a.next=8,f.encodeLimitOrderSubmissionWithSecret(b.inputToken,b.outputToken,b.inputAmount,b.outputAmount,b.owner);case 8:return i=(h=a.sent).witness,j=h.payload,k=h.order,a.next=14,f.signer.sendTransaction((0,ax.Z)((0,aw.Z)({},null!=c?c:{}),{to:j.to,data:j.data,value:ay.O$.from(j.value)}));case 14:return l=a.sent,m=Math.round(Date.now()/1e3),g(l,{summary:"Order submission",type:"limit-order-submission",order:(0,ax.Z)((0,aw.Z)({},k),{createdTxHash:null==l?void 0:l.hash.toLowerCase(),witness:i,status:"open",updatedAt:m.toString()})}),e(aG),e(aH),a.abrupt("return",l);case 20:case"end":return a.stop()}},a)})),function(a,b){return i.apply(this,arguments)}),[g,d,f,e]),q=(0,c.useCallback)((j=(0,K.Z)(N().mark(function a(b,c,h){var i,j,k,m;return N().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(f){a.next=2;break}throw Error("Could not reach Gelato Limit Orders library");case 2:if(d){a.next=4;break}throw Error("No chainId");case 4:if(l){a.next=6;break}throw Error("No account");case 6:return i=Boolean(b.module&&b.inputToken&&b.owner&&b.witness&&b.data),a.next=9,f.cancelLimitOrder(b,i,null!=h?h:{gasLimit:2e6});case 9:return j=a.sent,k=Math.round(Date.now()/1e3),g(j,{summary:m=c?"Order cancellation: ".concat(c.inputAmount," ").concat(c.inputTokenSymbol," for ").concat(c.outputAmount," ").concat(c.outputTokenSymbol):"Order cancellation",type:"limit-order-cancellation",order:(0,ax.Z)((0,aw.Z)({},b),{updatedAt:k.toString(),status:"cancelled",cancelledTxHash:null==j?void 0:j.hash.toLowerCase()})}),e(aG),e(aH),a.abrupt("return",j);case 16:case"end":return a.stop()}},a)})),function(a,b,c){return j.apply(this,arguments)}),[f,d,l,g,e]),r=(0,c.useCallback)(function(a,b){h(a,b)},[h]),s=(0,c.useCallback)(function(a,b){n(a,b)},[n]),t=(0,c.useCallback)(function(){m()},[m]),u=(0,c.useCallback)((k=(0,K.Z)(N().mark(function a(b,c){return N().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:b===ak.j.MUL?(c&&h(ak.g.PRICE,c.invert().toSignificant(6)),o(ak.j.DIV)):(c&&h(ak.g.PRICE,c.toSignificant(6)),o(ak.j.MUL));case 1:case"end":return a.stop()}},a)})),function(a,b){return k.apply(this,arguments)}),[o,h]);return{handleLimitOrderSubmission:p,handleLimitOrderCancellation:q,handleInput:r,handleCurrencySelection:s,handleSwitchTokens:t,handleRateType:u}},aO=function(){var a=ar(),b=ao();return{handlers:aN(),derivedOrderInfo:a,orderState:b}},aP=a(61744),aQ=a(68605),aR=a(23917),aS=a(50165),aT=a(45131),aU=a(90698),aV=a(77044),aW=a(9989),aX=(0,c.memo)(function(){var a=(0,V.$G)().t,b=(0,M.Z)((0,aQ.$c)(),2),e=b[0],f=b[1],d=(0,M.Z)((0,R.Z)((0,J.jsx)(aW.Z,{id:"disclaimer-limit-order",header:a("I acknowledge that:"),checks:[{key:"price-checkbox",content:a("I understand that small orders are executed at higher execution price due to gas fees.")},{key:"taxtoken-checkbox",content:a("I understand that using taxed tokens on limit orders is highly discouraged and not recommended - Taxed tokens can be stuck in limit orders and lost forever because of impossibility to execute an order for such tokens")},],onSuccess:function(){return f(!0)}}),!1,!1),2),g=d[0],h=d[1];return(0,c.useEffect)(function(){return e||g(),function(){h()}},[e]),null}),aY=a(7297),b=a(87379);function u(){var a=(0,aY.Z)(["\n  position: relative;\n  flex-direction: column;\n  justify-content: space-between;\n  padding: 1rem;\n"]);return u=function(){return a},a}function v(){var a=(0,aY.Z)(["\n  flex-shrink: 0;\n  height: fit-content;\n  padding: 0 24px;\n\n  "," {\n    padding: 0 40px;\n  }\n\n  "," {\n    ",";\n  }\n"]);return v=function(){return a},a}function w(){var a=(0,aY.Z)(["\n  width: 328px;\n"]);return w=function(){return a},a}var aZ=(0,b.ZP)(f.Z).withConfig({componentId:"sc-6f0ad235-0"})(u()),a$=(0,b.ZP)(f.Z).withConfig({componentId:"sc-6f0ad235-1"})(v(),function(a){return a.theme.mediaQueries.lg},function(a){return a.theme.mediaQueries.xxl},function(a){return a.$isChartExpanded?"padding: 0 120px":"padding: 0 40px"}),a_=(0,b.ZP)(r.Z).withConfig({componentId:"sc-6f0ad235-2"})(w()),o=a(5527),a0=a(16883),a1=a(85462),a2=a(59750),a3=a(85714),a4=a(97114),a5=a(86921);function x(){var a=(0,aY.Z)(["\n  flex-direction: column;\n  align-items: center;\n  padding: 24px;\n  width: 100%;\n  border-bottom: 1px solid ",";\n"]);return x=function(){return a},a}function y(){var a=(0,aY.Z)(["\n  color: ",";\n"]);return y=function(){return a},a}var j,a6=(0,b.ZP)(f.Z).withConfig({componentId:"sc-1ce763b9-0"})(x(),function(a){return a.theme.colors.cardBorder}),a7=(0,b.ZP)(o.Z).withConfig({componentId:"sc-1ce763b9-1"})(y(),function(a){return a.theme.colors.textSubtle}),a8=function(a){var b=a.title,c=a.subtitle,d=a.setIsChartDisplayed,e=a.isChartDisplayed,g=(0,M.Z)((0,R.Z)((0,J.jsx)(a5.Z,{})),1)[0];return(0,J.jsxs)(a6,{children:[(0,J.jsxs)(f.Z,{width:"100%",alignItems:"center",justifyContent:"center",children:[(0,J.jsx)(f.Z,{flex:"1",children:d&&(0,J.jsx)(a7,{onClick:function(){d(function(a){return!a})},variant:"text",scale:"sm",children:e?(0,J.jsx)(a0.Z,{color:"textSubtle"}):(0,J.jsx)(a1.Z,{width:"24px",color:"textSubtle"})})}),(0,J.jsx)(f.Z,{flex:"1",justifyContent:"center",children:(0,J.jsx)(a2.Z,{as:"h2",children:b})}),(0,J.jsx)(f.Z,{flex:"1",justifyContent:"flex-end",children:(0,J.jsx)(o.Z,{onClick:g,variant:"text",scale:"sm",children:(0,J.jsx)(a3.Z,{color:"textSubtle",width:"24px"})})})]}),(0,J.jsx)(f.Z,{alignItems:"center",children:(0,J.jsx)(a4.Z,{color:"textSubtle",fontSize:"14px",children:c})})]})},z=a(5324),a9=a(36544),ba=a(19729),bb=a(29973),bc=a(62276);(j=d||(d={})).ABOVE="above",j.BELOW="below",j.MARKET="market";var bd=function(a,b){if(a){if(a.equalTo(0))return[b("at market price"),d.MARKET];var c=parseFloat(a.toSignificant(6)).toLocaleString(void 0,{minimumFractionDigits:0,maximumFractionDigits:2});return a.lessThan("0")?[b("%percentage%% below market",{percentage:c}),d.BELOW]:[b("%percentage%% above market",{percentage:c}),d.ABOVE]}return[null,null]};function A(){var a=(0,aY.Z)(["\n  text-align: right;\n"]);return A=function(){return a},a}function B(){var a=(0,aY.Z)(["\n  cursor: pointer;\n"]);return B=function(){return a},a}var be=RegExp("^\\d*(?:\\\\[.])?\\d*$"),bf=(0,b.ZP)(z.Z).withConfig({componentId:"sc-9c3c44c9-0"})(A()),bg=(0,b.ZP)(f.Z).withConfig({componentId:"sc-9c3c44c9-1"})(B()),bh=(e={},(0,h.Z)(e,d.ABOVE,"success"),(0,h.Z)(e,d.BELOW,"failure"),(0,h.Z)(e,d.MARKET,"textSubtle"),e),bi=function(a){var g,n=a.id,o=a.value,w=a.onUserInput,b=a.inputCurrency,c=a.outputCurrency,h=a.percentageRateDifference,i=a.rateType,x=a.handleRateType,y=a.price,p=a.handleResetToMarketPrice,e=a.realExecutionPriceAsString,q=a.disabled,d=(0,V.$G)().t,r=i===ak.j.MUL?"".concat(null==c?void 0:c.symbol," per ").concat(null==b?void 0:b.symbol):"".concat(null==b?void 0:b.symbol," per ").concat(null==c?void 0:c.symbol),j=(0,a9.Z)((0,J.jsxs)(J.Fragment,{children:[(0,J.jsx)(a4.Z,{children:d("Takes into account the gas necessary to execute your order and guarantees that your desired rate is fulfilled.")}),(0,J.jsx)(a4.Z,{children:d("It fluctuates according to gas prices.")}),(null==b?void 0:b.symbol)&&(null==c?void 0:c.symbol)&&e&&(0,J.jsx)(a4.Z,{children:"never executes"===e?d("Assuming current gas price this order will never execute. Try increasing the amount of tokens to swap."):d("Assuming current gas price it should execute when 1 %assetOneSymbol% = %price% %assetTwoSymbol%",{assetOneSymbol:i===ak.j.MUL?null==b?void 0:b.symbol:null==c?void 0:c.symbol,assetTwoSymbol:i===ak.j.MUL?null==c?void 0:c.symbol:null==b?void 0:b.symbol,price:e})})]}),{placement:"top"}),s=j.targetRef,t=j.tooltip,u=j.tooltipVisible,k=null===(g=null==h?void 0:h.equalTo(0))|| void 0===g||g,l=(0,M.Z)(bd(h,d),2),m=l[0],v=bh[l[1]];return(0,J.jsxs)(J.Fragment,{children:[(0,J.jsxs)(f.Z,{justifyContent:"space-between",id:n,children:[(0,J.jsxs)(f.Z,{alignItems:"center",children:[(0,J.jsx)(a4.Z,{mr:"8px",color:"secondary",fontSize:"12px",bold:!0,textTransform:"uppercase",children:d("Price")}),(0,J.jsx)(S.Z,{onClick:p,startIcon:(0,J.jsx)(ba.Z,{color:k?"textDisabled":"primary"}),variant:"secondary",scale:"xs",disabled:k,children:(0,J.jsx)(a4.Z,{fontSize:"12px",bold:!0,color:k?"textDisabled":"primary",textTransform:"uppercase",children:d("Market")})})]}),m&&(0,J.jsx)(a4.Z,{color:v,fontSize:"12px",children:m})]}),(0,J.jsx)(bf,{value:o,disabled:q,onChange:function(b){var a=b.target.value.replace(/,/g,".");(""===a||be.test((0,ag.hr)(a)))&&w(a)},autoComplete:"off",autoCorrect:"off",pattern:"^[0-9]*[.,]?[0-9]*$",minLength:1,maxLength:79,spellCheck:"false",type:"text",inputMode:"decimal"}),b&&c&&(0,J.jsxs)(bg,{justifyContent:"flex-end",alignItems:"center",onClick:function(){x(i,y)},children:[(0,J.jsx)(a4.Z,{small:!0,bold:!0,children:r}),(0,J.jsx)(bb.Z,{color:"textSubtle",width:"24px",ml:"4px"})]}),(0,J.jsx)(f.Z,{justifySelf:"flex-end",mb:"8px",minHeight:"16px",children:e&&(0,J.jsxs)(J.Fragment,{children:[(0,J.jsx)(a4.Z,{small:!0,color:"textSubtle",mr:"4px",children:d("Real execution price: %price%",{price:e})}),(0,J.jsxs)("span",{ref:s,children:[(0,J.jsx)(bc.Z,{color:"textSubtle"}),u&&t]})]})})]})},bj=a(6372),bk=a(92863),bl=a(39475);function C(){var a=(0,aY.Z)(["\n  box-shadow: inset 0px -2px 0px rgba(0, 0, 0, 0.1);\n  .icon-up-down {\n    display: none;\n  }\n  &:hover {\n    background-color: ",";\n    .icon-down {\n      display: none;\n      fill: white;\n    }\n    .icon-up-down {\n      display: block;\n      fill: white;\n    }\n  }\n"]);return C=function(){return a},a}var bm=(0,b.ZP)(o.Z).withConfig({componentId:"sc-57e30270-0"})(C(),function(a){return a.theme.colors.primary}),bn=function(a){var d=a.handleSwitchTokens,b=a.color,e=(0,c.useCallback)(function(){return null==d?void 0:d()},[d]);return(0,J.jsx)(W.Tz,{justify:"space-between",children:(0,J.jsx)(bl.BA,{justify:"center",style:{padding:"0 1rem"},children:(0,J.jsxs)(bm,{variant:"light",scale:"sm",onClick:e,children:[(0,J.jsx)(bj.Z,{className:"icon-down",color:b}),(0,J.jsx)(bk.Z,{className:"icon-up-down",color:b})]})})})},bo=a(49438),bp=a(38144),bq=a(50156),br=a(39320);function D(){var a=(0,aY.Z)(["\n  & > div {\n    width: 100%;\n    background-color: ",";\n    border: 0;\n  }\n  & button {\n    border-bottom-left-radius: 0px;\n    border-bottom-right-radius: 0px;\n  }\n"]);return D=function(){return a},a}var bs=b.ZP.div.withConfig({componentId:"sc-91aa0482-0"})(D(),function(a){return a.theme.colors.input}),bt=function(a){var c=a.activeIndex,d=a.onItemClick,e=(0,aR.ZP)().theme,b=(0,V.$G)().t;return(0,J.jsx)(bs,{children:(0,J.jsx)(bq.Z,{activeIndex:c,onItemClick:d,children:[b("Open Orders"),b("Order History")].map(function(a,b){return(0,J.jsx)(br.Z,{style:{color:b===c?e.colors.text:e.colors.textSubtle,backgroundColor:b===c?e.card.background:e.colors.input},children:a},a)})})})},bu=a(48993),bv=a(158),bw=a(94528),bx=function(a){if(a)return parseFloat(a.toSignificant(18)).toLocaleString(void 0,{minimumFractionDigits:0,maximumFractionDigits:8})},by=function(a){var b,i=(0,ab.Z)().chainId,j=(0,aE.Z)(),e=(0,ad.U8)(a.inputToken),f=(0,ad.U8)(a.outputToken),k=(0,az.ub)(a.createdTxHash),l=(0,az.ub)(null!==(b=a.cancelledTxHash)&& void 0!==b?b:void 0),g=(0,c.useMemo)(function(){if(e&&a.inputAmount)return(0,L.Z)(e,P.WU)?new P.dt(e,a.inputAmount):P.ih.ether(a.inputAmount)},[e,a.inputAmount]),n=(0,c.useMemo)(function(){return a.adjustedMinReturn?a.adjustedMinReturn:j&&i&&a.minReturn?j.getAdjustedMinReturn(a.minReturn):void 0},[i,j,a.adjustedMinReturn,a.minReturn]),h=(0,c.useMemo)(function(){if(f&&n)return(0,L.Z)(f,P.WU)?new P.dt(f,n):P.ih.ether(n)},[f,n]),d=(0,c.useMemo)(function(){return af(g,h)},[g,h]);return{inputToken:e,outputToken:f,inputAmount:bx(g),outputAmount:bx(h),executionPrice:bx(d),invertedExecutionPrice:bx(null==d?void 0:d.invert()),isOpen:a.status===m.OPEN,isCancelled:a.status===m.CANCELLED,isExecuted:a.status===m.EXECUTED,isSubmissionPending:k,isCancellationPending:l,movoScanUrls:{created:a.createdTxHash?(0,ag.Ms)(a.createdTxHash,"transaction"):null,executed:a.executedTxHash?(0,ag.Ms)(a.executedTxHash,"transaction"):null,cancelled:a.cancelledTxHash?(0,ag.Ms)(a.cancelledTxHash,"transaction"):null}}},bz=a(292),bA=function(a){var c=a.icon,d=a.text,b=a.bold;return(0,J.jsxs)(f.Z,{alignItems:"center",children:[(0,J.jsx)(a4.Z,{color:"text",mr:"8px",bold:void 0!==b&&b,textTransform:"uppercase",children:d}),c]})},bB=function(b){var a=b.currency,c=b.bold;return(0,J.jsx)(bA,{bold:c,text:null==a?void 0:a.symbol,icon:(0,J.jsx)(bz.Z,{currency:a})})},bC=a(90452),bD=a(24930),bE=a(63603),bF=a(41228),bG=function(a){var b=a.firstRow,c=a.secondRow;return(0,J.jsxs)(r.Z,{children:[(0,J.jsx)(r.Z,{mb:"4px",children:b}),(0,J.jsx)(r.Z,{children:c})]})},bH=a(67334),bI=function(){var a=(0,V.$G)().t;return(0,J.jsx)(bH.Z,{variant:"warning",mt:"24px",children:(0,J.jsxs)(bH.Y,{children:[(0,J.jsx)("b",{children:a("Real Execution Price:")}),(0,J.jsxs)("ol",{children:[(0,J.jsx)("li",{children:a("Your execution gas fees are paid for by the spread between your specified price and the real execution price.")}),(0,J.jsx)("li",{children:a("Gas fees are volatile and thus the exact market price at which your order will execute is unpredictable.")}),(0,J.jsx)("li",{children:a("It might take much longer than you expected to reach the price that fills your order + fees.")})]}),(0,J.jsx)("br",{}),(0,J.jsx)("b",{children:a('"Fee on Transfer" Tokens')}),(0,J.jsx)("ol",{children:(0,J.jsx)("li",{children:a('"Fee on transfer" tokens should not be used with Limit Orders (use at your own risk)')})})]})})};function E(){var a=(0,aY.Z)(["\n  border-radius: 16px;\n  padding: 16px;\n  margin-top: 24px;\n  border: 1px solid ",";\n  background-color: ",";\n"]);return E=function(){return a},a}var p,bJ=b.ZP.div.withConfig({componentId:"sc-50c40912-0"})(E(),function(a){return a.theme.colors.cardBorder},function(a){return a.theme.colors.background}),bK=function(e){var g,h,i,j,k,l,m=e.onDismiss,v=e.order,a=e.formattedOrder,w=(0,ab.Z)().chainId,x=(0,aR.ZP)().theme,b=(0,V.$G)().t,y=aN().handleLimitOrderCancellation,o=(0,c.useState)({attemptingTxn:!1,cancellationErrorMessage:void 0,txHash:void 0}),n=o[0],p=n.cancellationErrorMessage,z=n.attemptingTxn,q=n.txHash,F=o[1],A=(0,c.useCallback)(function(){var b,c;y&&(F({attemptingTxn:!0,cancellationErrorMessage:void 0,txHash:void 0}),y(v,(null===(b=a.inputToken)|| void 0===b?void 0:b.symbol)&&(null===(c=a.outputToken)|| void 0===c?void 0:c.symbol)&&a.inputAmount&&a.outputAmount?{inputTokenSymbol:a.inputToken.symbol,outputTokenSymbol:a.outputToken.symbol,inputAmount:a.inputAmount,outputAmount:a.outputAmount}:void 0).then(function(a){F({attemptingTxn:!1,cancellationErrorMessage:void 0,txHash:a.hash})}).catch(function(a){F({attemptingTxn:!1,cancellationErrorMessage:a.message,txHash:void 0})}))},[y,a.inputAmount,a.outputAmount,null===(g=a.inputToken)|| void 0===g?void 0:g.symbol,null===(h=a.outputToken)|| void 0===h?void 0:h.symbol,v,]),B="1 ".concat(null===(i=a.inputToken)|| void 0===i?void 0:i.symbol," = ").concat(a.executionPrice," ").concat(null===(j=a.outputToken)|| void 0===j?void 0:j.symbol),C="1 ".concat(null===(k=a.outputToken)|| void 0===k?void 0:k.symbol," = ").concat(a.invertedExecutionPrice," ").concat(null===(l=a.inputToken)|| void 0===l?void 0:l.symbol),r=a.isOpen,s=a.isExecuted,t=a.isCancelled,u=a.isSubmissionPending,D=a.isCancellationPending,d=a.movoScanUrls,E=(0,J.jsxs)(J.Fragment,{children:[(0,J.jsxs)(f.Z,{width:"100%",justifyContent:"space-between",children:[(0,J.jsx)(bG,{firstRow:(0,J.jsx)(a4.Z,{children:a.inputAmount}),secondRow:(0,J.jsx)(bB,{currency:a.inputToken})}),(0,J.jsx)(bw.Z,{}),(0,J.jsx)(bG,{firstRow:(0,J.jsx)(a4.Z,{children:a.outputAmount}),secondRow:(0,J.jsx)(bB,{currency:a.outputToken})})]}),(0,J.jsx)(bL,{currentPriceExchangeRateText:"0.002474 MOVO = 1 BUSD",currentPriceExchangeRateTextReversed:"404.11169 BUSD = 1 MOVO",limitPriceExchangeRateText:B,limitPriceExchangeRateTextReversed:C,isOpen:r,isExecuted:s,isCancelled:t,isSubmissionPending:u,isCancellationPending:D}),(0,J.jsx)(bI,{}),(0,J.jsxs)(f.Z,{flexDirection:"column",children:[r?(0,J.jsxs)(J.Fragment,{children:[(0,J.jsx)(S.Z,{variant:"primary",mt:"16px",as:"a",external:!0,href:a.movoScanUrls.created,children:b("View on MovoScan")}),!u&&(0,J.jsx)(S.Z,{variant:"danger",mt:"16px",onClick:A,children:b("Cancel Order")})]}):(0,J.jsx)(S.Z,{variant:"primary",mt:"16px",as:"a",external:!0,href:a.movoScanUrls.created,children:b("View order creation on MOVOScan")}),t&&d.cancelled&&(0,J.jsx)(S.Z,{variant:"primary",mt:"16px",as:"a",external:!0,href:d.cancelled,children:b("View order cancellation on MOVOScan")}),s&&d.executed&&(0,J.jsx)(S.Z,{variant:"primary",mt:"16px",as:"a",external:!0,href:d.executed,children:b("View order execution on MOVOScan")})]})]});return(0,J.jsx)(bC.Z,{title:b("Open Order Details"),headerBackground:x.colors.gradients.cardHeader,style:{width:"436px"},onDismiss:m,children:z?(0,J.jsx)(bM,{}):q?(0,J.jsx)(bF.rD,{chainId:w,hash:q,onDismiss:m}):p?(0,J.jsx)(bF.ht,{onDismiss:m,message:p}):E})},bL=(0,c.memo)(function(a){var d=a.limitPriceExchangeRateText,e=a.limitPriceExchangeRateTextReversed,g=a.isOpen,h=a.isExecuted,i=a.isCancelled,j=a.isSubmissionPending,c=a.isCancellationPending,b=(0,V.$G)().t;return(0,J.jsx)(bJ,{children:(0,J.jsxs)(r.Z,{mb:"4px",children:[g&&j&&(0,J.jsx)(bD.Z,{outline:!0,scale:"sm",p:"8px",mb:"16px",variant:"warning",children:b("Pending")}),h&&(0,J.jsx)(bD.Z,{outline:!0,scale:"sm",p:"8px",mb:"16px",variant:"success",children:b("Filled")}),c&&(0,J.jsx)(bD.Z,{outline:!0,scale:"sm",p:"8px",mb:"16px",variant:"warning",children:b("Cancelling")}),i&&!c&&(0,J.jsx)(bD.Z,{outline:!0,scale:"sm",p:"8px",mb:"16px",variant:"failure",children:b("Cancelled")}),(0,J.jsx)(a4.Z,{fontSize:"14px",color:"textSubtle",children:b("Limit Price")}),(0,J.jsxs)(f.Z,{flexDirection:"column",children:[(0,J.jsx)(a4.Z,{fontSize:"14px",children:d}),(0,J.jsx)(a4.Z,{fontSize:"14px",children:e})]})]})})}),bM=(0,c.memo)(function(){var a=(0,V.$G)().t;return(0,J.jsxs)(f.Z,{children:[(0,J.jsxs)(f.Z,{flexDirection:"column",flexGrow:"wrap",flexBasis:"267px",children:[(0,J.jsx)(a4.Z,{fontSize:"20px",small:!0,color:"secondary",children:a("Confirm")}),(0,J.jsx)(a4.Z,{small:!0,color:"textSubtle",mt:"8px",children:a("Please confirm the transaction in your wallet")})]}),(0,J.jsx)(f.Z,{children:(0,J.jsx)(bE.Z,{size:70})})]})});(p=n||(n={})).TAG="Tag",p.TEXT="Text";var bN=function(a){var d=a.element,b=a.text,c=a.color;return d===n.TAG?(0,J.jsx)(bD.Z,{outline:!0,scale:"sm",variant:c,ml:"auto",children:b}):(0,J.jsx)(a4.Z,{color:c,children:b})},bO=function(d){var a=d.formattedOrder,e=d.showOpenTag,f=d.element,b=void 0===f?n.TAG:f,c=(0,V.$G)().t,g=a.isOpen,h=a.isSubmissionPending,j=a.isCancelled,i=a.isCancellationPending,k=a.isExecuted;return g&&!h&& void 0!==e&&e?(0,J.jsx)(bN,{element:b,text:c("Open"),color:"success"}):g&&h?(0,J.jsx)(bN,{element:b,text:c("Pending"),color:"warning"}):j&&!i?(0,J.jsx)(bN,{element:b,text:c("Cancelled"),color:"failure"}):i?(0,J.jsx)(bN,{element:b,text:c("Cancelling"),color:"warning"}):k?(0,J.jsx)(bN,{element:b,text:c("Filled"),color:"success"}):null},bP=function(g){var e=g.order,d=(0,V.$G)().t,a=by(e),b=a.inputToken,c=a.outputToken,h=a.inputAmount,i=a.outputAmount,j=a.executionPrice,k=(0,M.Z)((0,R.Z)((0,J.jsx)(bK,{order:e,formattedOrder:a})),1),l=k[0];return(0,J.jsx)(f.Z,{width:"100%",justifyContent:"center",alignItems:"center",onClick:l,children:(0,J.jsxs)(r.Z,{width:"100%",children:[(0,J.jsxs)(f.Z,{mb:"16px",children:[(0,J.jsx)(bB,{bold:!0,currency:b}),(0,J.jsx)(bw.Z,{color:"textSubtle"}),(0,J.jsx)(bB,{bold:!0,currency:c}),(0,J.jsx)(bO,{formattedOrder:a})]}),(0,J.jsxs)(f.Z,{justifyContent:"space-between",children:[(0,J.jsx)(a4.Z,{fontSize:"12px",bold:!0,color:"textSubtle",textTransform:"uppercase",children:d("From")}),(0,J.jsx)(a4.Z,{small:!0,textTransform:"uppercase",children:"".concat(h," ").concat(null==b?void 0:b.symbol)})]}),(0,J.jsxs)(f.Z,{justifyContent:"space-between",children:[(0,J.jsx)(a4.Z,{fontSize:"12px",bold:!0,color:"textSubtle",textTransform:"uppercase",children:d("To")}),(0,J.jsx)(a4.Z,{small:!0,textTransform:"uppercase",children:"".concat(i," ").concat(null==c?void 0:c.symbol)})]}),(0,J.jsxs)(f.Z,{justifyContent:"space-between",children:[(0,J.jsx)(a4.Z,{fontSize:"12px",bold:!0,color:"textSubtle",textTransform:"uppercase",children:d("Price")}),(0,J.jsx)(a4.Z,{small:!0,children:"".concat(j," ").concat(null==c?void 0:c.symbol," per ").concat(null==b?void 0:b.symbol)})]})]})})};function F(){var a=(0,aY.Z)(["\n  cursor: pointer;\n\n  &:hover {\n    background: ",";\n  }\n"]);return F=function(){return a},a}var bQ=b.ZP.tr.withConfig({componentId:"sc-e24d6680-0"})(F(),function(a){return a.theme.colors.backgroundDisabled}),bR=(0,c.memo)(function(a){var b=a.orders;return(0,J.jsx)(bu.Z,{children:(0,J.jsx)("tbody",{children:b.map(function(a){return(0,J.jsx)(bQ,{children:(0,J.jsx)(bv.Td,{children:(0,J.jsx)(bP,{order:a})})},a.id)})})})}),bS=a(37320),bT=function(e){var d=e.order,a=by(d),b=a.inputToken,c=a.outputToken,f=a.inputAmount,g=a.outputAmount,h=a.executionPrice,i=(0,M.Z)((0,R.Z)((0,J.jsx)(bK,{order:d,formattedOrder:a})),1),j=i[0];return(0,J.jsxs)("tr",{children:[(0,J.jsx)(bv.Td,{children:(0,J.jsx)(bG,{firstRow:f,secondRow:(0,J.jsx)(bB,{bold:!0,currency:b})})}),(0,J.jsx)(bv.Td,{children:(0,J.jsx)(bG,{firstRow:g,secondRow:(0,J.jsx)(bB,{bold:!0,currency:c})})}),(0,J.jsx)(bv.Td,{children:(0,J.jsx)(bG,{firstRow:h,secondRow:(0,J.jsx)(bA,{text:"".concat(null==c?void 0:c.symbol,"/").concat(null==b?void 0:b.symbol),icon:(0,J.jsx)(bb.Z,{})})})}),(0,J.jsx)(bv.Td,{children:(0,J.jsx)(bO,{formattedOrder:a,showOpenTag:!0,element:n.TEXT})}),(0,J.jsx)(bv.Td,{children:(0,J.jsx)(o.Z,{variant:"text",onClick:j,children:(0,J.jsx)(bS.Z,{})})})]})},bU=(0,c.memo)(function(b){var c=b.orders,a=(0,V.$G)().t;return(0,J.jsx)(bu.Z,{children:(0,J.jsxs)(J.Fragment,{children:[(0,J.jsx)("thead",{children:(0,J.jsxs)("tr",{children:[(0,J.jsx)(bv.Th,{children:(0,J.jsx)(a4.Z,{fontSize:"12px",bold:!0,textTransform:"uppercase",color:"textSubtle",textAlign:"left",children:a("From")})}),(0,J.jsx)(bv.Th,{children:(0,J.jsx)(a4.Z,{fontSize:"12px",bold:!0,textTransform:"uppercase",color:"textSubtle",textAlign:"left",children:a("To")})}),(0,J.jsx)(bv.Th,{children:(0,J.jsx)(a4.Z,{fontSize:"12px",bold:!0,textTransform:"uppercase",color:"textSubtle",textAlign:"left",children:a("Limit Price")})}),(0,J.jsx)(bv.Th,{children:(0,J.jsx)(a4.Z,{fontSize:"12px",bold:!0,textTransform:"uppercase",color:"textSubtle",textAlign:"left",children:a("Status")})}),(0,J.jsx)(bv.Th,{})]})}),(0,J.jsx)("tbody",{children:c.map(function(a){return(0,J.jsx)(bT,{order:a},a.id)})})]})})}),bV=a(26170),bW=a(69508),bX=a(16863),bY=a(118),bZ=a(22661),b$=function(a){var b=a.orderCategory,c=(0,V.$G)().t;return(0,J.jsxs)(f.Z,{p:"24px",justifyContent:"center",alignItems:"center",flexDirection:"column",children:[(0,J.jsx)(bZ.Z,{width:64}),(0,J.jsx)(a4.Z,{color:"textDisabled",children:c(b===l.Open?"No Open Orders":"No Order History")})]})},b_=a(84091),b0=(0,c.memo)(function(){return(0,J.jsx)(bu.Z,{children:(0,J.jsxs)("tbody",{children:[(0,J.jsxs)("tr",{children:[(0,J.jsx)(bv.Td,{children:(0,J.jsx)(b_.Z,{})}),(0,J.jsx)(bv.Td,{children:(0,J.jsx)(b_.Z,{})}),(0,J.jsx)(bv.Td,{children:(0,J.jsx)(b_.Z,{})})]}),(0,J.jsxs)("tr",{children:[(0,J.jsx)(bv.Td,{children:(0,J.jsx)(b_.Z,{})}),(0,J.jsx)(bv.Td,{children:(0,J.jsx)(b_.Z,{})}),(0,J.jsx)(bv.Td,{children:(0,J.jsx)(b_.Z,{})})]}),(0,J.jsxs)("tr",{children:[(0,J.jsx)(bv.Td,{children:(0,J.jsx)(b_.Z,{})}),(0,J.jsx)(bv.Td,{children:(0,J.jsx)(b_.Z,{})}),(0,J.jsx)(bv.Td,{children:(0,J.jsx)(b_.Z,{})})]})]})})});function G(){var a=(0,aY.Z)(["\n  color: ",";\n  padding: 0 20px;\n  :hover {\n    cursor: pointer;\n  }\n"]);return G=function(){return a},a}var b1=b.ZP.div.withConfig({componentId:"sc-33f0437-0"})(G(),function(a){return a.theme.colors.primary}),b2=(0,c.memo)(function(d){var a=d.data,h=d.orderCategory,i=d.itemsPerPage,e=void 0===i?5:i,l=d.children,m=(0,V.$G)().t,j=(0,c.useState)(1),b=j[0],t=j[1],k=Array.isArray(a)?a.length:0,g=(0,c.useMemo)(function(){return k?Math.ceil(k/e):1},[k,e]),n=(0,c.useCallback)(function(){t(function(a){return a===g?a:a+1})},[g]),o=(0,c.useCallback)(function(){t(function(a){return 1===a?a:a-1})},[]),p=(0,c.useMemo)(function(){return e*(b-1)},[b,e]),q=(0,c.useMemo)(function(){return e*b},[b,e]),s=(0,c.useMemo)(function(){return Array.isArray(a)?a.slice(p,q):[]},[a,p,q]);return(0,c.useEffect)(function(){t(1)},[h]),(0,J.jsxs)(J.Fragment,{children:[l({paginatedData:s}),!a&&(0,J.jsx)(b0,{}),a&&!k&&(0,J.jsx)(b$,{orderCategory:h}),(0,J.jsxs)(bV.Z,{gridGap:"16px",gridTemplateColumns:["1fr",null,null,null,"1fr 2fr 1fr"],mt:"16px",mb:"16px",px:"16px",children:[(0,J.jsx)(r.Z,{}),(0,J.jsxs)(f.Z,{width:"100%",justifyContent:"center",alignItems:"center",children:[(0,J.jsx)(b1,{onClick:o,children:(0,J.jsx)(bW.Z,{color:1===b?"textDisabled":"primary"})}),(0,J.jsx)(a4.Z,{children:m("Page %page% of %maxPage%",{page:b,maxPage:g})}),(0,J.jsx)(b1,{onClick:n,children:(0,J.jsx)(bX.Z,{color:b===g?"textDisabled":"primary"})})]}),(0,J.jsx)(f.Z,{width:"100%",justifyContent:["center",null,null,null,"flex-end"],children:(0,J.jsx)(bY.default,{subgraphName:"gelatodigital/limit-orders-bsc",inline:!0})})]})]})}),b3=(0,c.memo)(function(b){var a,d,e,f,g=b.orderCategory,i=b.isCompact,h=(d=aM((a=g)===l.History),e=aL(a===l.Open),f=(0,c.useMemo)(function(){return a===l.Open?e:d},[a,e,d]),(0,c.useMemo)(function(){return Array.isArray(f)?aF()(f,function(a){return parseInt(a.createdAt)},"desc"):f},[f]));return(0,J.jsx)(b2,{data:h,orderCategory:g,children:function(b){var a=b.paginatedData;return i?(0,J.jsx)(bR,{orders:a}):(0,J.jsx)(bU,{orders:a})}})}),b4=(0,c.memo)(function(d){var e=d.isCompact,a=(0,c.useState)(l.Open),b=a[0],h=a[1],g=(0,c.useCallback)(function(a){return h(a)},[]);return(0,J.jsx)(f.Z,{flex:"1",justifyContent:"center",mb:"24px",children:(0,J.jsxs)(bp.Z,{style:{width:"100%",height:"max-content"},children:[(0,J.jsx)(bt,{onItemClick:g,activeIndex:b}),(0,J.jsx)(b3,{orderCategory:b,isCompact:e})]})})}),b5=a(74314);function H(){var a=(0,aY.Z)(["\n  border-radius: 16px;\n  padding: 16px;\n  margin-top: 24px;\n  border: 1px solid ",";\n  background-color: ",";\n"]);return H=function(){return a},a}var b6=b.ZP.div.withConfig({componentId:"sc-50fafac9-0"})(H(),function(a){return a.theme.colors.cardBorder},function(a){return a.theme.colors.background}),b7=function(a){var s=a.onDismiss,g=a.currencies,j=a.formattedAmounts,k=a.currentMarketRate,l=a.currentMarketRateInverted,m=a.limitPrice,n=a.limitPriceInverted,o=a.percentageRateDifference,p=a.onConfirm,b=a.attemptingTxn,c=a.txHash,t=a.customOnDismiss,d=a.swapErrorMessage,h=(0,ab.Z)().chainId,i=(0,V.$G)().t,q=(0,aR.ZP)().theme,r=(0,ac.pu)(g.output,h),e=function(){t&&t(),s()};return(0,J.jsxs)(bC.Z,{title:i("Confirm Limit Order"),headerBackground:q.colors.gradients.cardHeader,onDismiss:e,style:{width:"436px"},children:[b?(0,J.jsx)(ca,{}):c?(0,J.jsx)(bF.rD,{chainId:h,hash:c,currencyToAdd:r,onDismiss:e}):d?(0,J.jsx)(bF.ht,{onDismiss:e,message:d}):(0,J.jsx)(b8,{currencies:g,formattedAmounts:j,currentMarketRate:k,currentMarketRateInverted:l,limitPrice:m,limitPriceInverted:n,percentageRateDifference:o}),!c&&!d&&(0,J.jsx)(f.Z,{justifyContent:"center",mt:"24px",children:(0,J.jsx)(S.Z,{scale:"md",variant:"primary",onClick:p,width:"100%",disabled:b,children:i(b?"Confirming...":"Confirm")})})]})},b8=function(b){var c,d,e,g,h,i,j,k,l,m,a=b.currencies,n=b.formattedAmounts,o=b.currentMarketRate,p=b.currentMarketRateInverted,q=b.limitPrice,r=b.limitPriceInverted,s=b.percentageRateDifference,t=(0,V.$G)().t,u="1 ".concat(null===(c=a.input)|| void 0===c?void 0:c.symbol," = ").concat(o," ").concat(null===(d=a.output)|| void 0===d?void 0:d.symbol),v="1 ".concat(null===(e=a.output)|| void 0===e?void 0:e.symbol," = ").concat(p," ").concat(null===(g=a.input)|| void 0===g?void 0:g.symbol),w="1 ".concat(null===(h=a.input)|| void 0===h?void 0:h.symbol," = ").concat(q," ").concat(null===(i=a.output)|| void 0===i?void 0:i.symbol),x="1 ".concat(null===(j=a.output)|| void 0===j?void 0:j.symbol," = ").concat(r," ").concat(null===(k=a.input)|| void 0===k?void 0:k.symbol);return(0,J.jsxs)(J.Fragment,{children:[(0,J.jsxs)(f.Z,{flexDirection:"column",width:"100%",children:[(0,J.jsxs)(f.Z,{alignItems:"center",justifyContent:"space-between",children:[(0,J.jsx)(a4.Z,{fontSize:"24px",color:"text",children:n.input}),(0,J.jsxs)(f.Z,{alignItems:"center",children:[(0,J.jsx)(a4.Z,{textTransform:"uppercase",color:"text",mr:"8px",children:null===(l=a.input)|| void 0===l?void 0:l.symbol}),(0,J.jsx)(b5.Xw,{currency:a.input})]})]}),(0,J.jsx)(f.Z,{justifyContent:"center",children:(0,J.jsx)(bj.Z,{})}),(0,J.jsxs)(f.Z,{alignItems:"center",justifyContent:"space-between",children:[(0,J.jsx)(a4.Z,{fontSize:"24px",color:"text",children:n.output}),(0,J.jsxs)(f.Z,{alignItems:"center",children:[(0,J.jsx)(a4.Z,{textTransform:"uppercase",color:"text",mr:"8px",children:null===(m=a.output)|| void 0===m?void 0:m.symbol}),(0,J.jsx)(b5.Xw,{currency:a.output})]})]})]}),(0,J.jsx)(b9,{currentPriceExchangeRateText:u,currentPriceExchangeRateTextReversed:v,limitPriceExchangeRateText:w,limitPriceExchangeRateTextReversed:x}),(0,J.jsx)(bH.Z,{variant:"success",mt:"24px",children:(0,J.jsx)(bH.Y,{children:t("Limit price is %percentage%% above the current market rate. The order will be executed when the market price reaches high enough above your limit price (to also pay for limit order execution gas fees).",{percentage:s})})}),(0,J.jsx)(bI,{})]})},b9=(0,c.memo)(function(a){var c=a.currentPriceExchangeRateText,d=a.currentPriceExchangeRateTextReversed,e=a.limitPriceExchangeRateText,g=a.limitPriceExchangeRateTextReversed,b=(0,V.$G)().t;return(0,J.jsxs)(b6,{children:[(0,J.jsxs)(f.Z,{justifyContent:"space-between",children:[(0,J.jsx)(a4.Z,{fontSize:"14px",color:"textSubtle",children:b("Current Market Price")}),(0,J.jsxs)(f.Z,{flexDirection:"column",children:[(0,J.jsx)(a4.Z,{color:"text",fontSize:"14px",bold:!0,children:c}),(0,J.jsx)(a4.Z,{color:"text",fontSize:"14px",children:d})]})]}),(0,J.jsxs)(f.Z,{justifyContent:"space-between",mt:"16px",children:[(0,J.jsx)(a4.Z,{fontSize:"14px",color:"textSubtle",children:b("Limit Price")}),(0,J.jsxs)(f.Z,{flexDirection:"column",children:[(0,J.jsx)(a4.Z,{color:"#129E7D",fontSize:"14px",bold:!0,children:e}),(0,J.jsx)(a4.Z,{color:"#129E7D",fontSize:"14px",children:g})]})]})]})}),ca=(0,c.memo)(function(){var a=(0,V.$G)().t;return(0,J.jsxs)(f.Z,{children:[(0,J.jsxs)(f.Z,{flexDirection:"column",flexGrow:"wrap",flexBasis:"267px",children:[(0,J.jsx)(a4.Z,{fontSize:"20px",small:!0,color:"secondary",children:a("Confirm")}),(0,J.jsx)(a4.Z,{small:!0,color:"textSubtle",mt:"8px",children:a("Please confirm the transaction in your wallet")})]}),(0,J.jsx)(f.Z,{children:(0,J.jsx)(bE.Z,{size:70})})]})}),cb=function(a,b){if(a&&b){var c=b.subtract(a).divide(a);return new P.gG(c.numerator,c.denominator)}},cc=a(19131),cd=function(){var v,w,x,y,z,bv,ag=(0,aV.Ge)().account,d=(0,V.$G)().t,bw=(0,O.useRouter)(),ai=(0,Q.Z)(),A=ai.isMobile,aW=ai.isTablet,aY=(0,aR.ZP)().theme,aj=(0,M.Z)((0,aQ.vD)(A),2),a0=aj[0],a1=aj[1],al=(0,c.useState)(!1),i=al[0],am=al[1],an=(0,c.useState)(a0),g=an[0],ao=an[1];(0,c.useEffect)(function(){a1(g)},[g,a1]);var n=av(),ap=[(0,ad.U8)(null==n?void 0:n.inputCurrencyId),(0,ad.U8)(null==n?void 0:n.outputCurrencyId),],a2=ap[0],a3=ap[1],a4=(0,c.useMemo)(function(){var a;return null!==(bv=(a=[a2,a3]).filter(function(a){return(0,L.Z)(a,P.WU)}))&& void 0!==bv?bv:[]},[a2,a3]),a5=(0,ad.e_)(),aq=(0,c.useMemo)(function(){return a4&&a4.filter(function(a){return!(a.address in a5)})},[a5,a4]),a6=(0,M.Z)((0,R.Z)((0,J.jsx)(cc.Z,{tokens:aq,onCancel:function(){return bw.push("/limit-orders")}}),!1,!1,"limitOrderTokenWarningModal"),1),bx=a6[0];(0,c.useEffect)(function(){aq.length>0&&bx()},[aq.length]);var h,ar,as,at,o,au,p,q,B,aw,ax,C,az,D=aO(),k=D.handlers,s=k.handleInput,aA=k.handleCurrencySelection,a7=k.handleSwitchTokens,a9=k.handleLimitOrderSubmission,ba=k.handleRateType,b=D.derivedOrderInfo,a=b.currencies,bb=b.currencyBalances,t=b.parsedAmounts,e=b.formattedAmounts,aB=b.rawAmounts,aD=b.trade,j=b.price,l=b.inputError,aE=b.wrappedCurrencies,aF=b.singleTokenPrice,u=b.currencyIds,E=D.orderState,aG=E.independentField,bc=E.basisField,aH=E.rateType,aI=(0,c.useState)({tradeToConfirm:void 0,attemptingTxn:!1,swapErrorMessage:void 0,txHash:void 0}),F=aI[0],bd=F.swapErrorMessage,be=F.attemptingTxn,aJ=F.txHash,by=aI[1],aK=(0,M.Z)((0,aS.tz)(t.input),2),G=aK[0],bf=aK[1],aL=(0,c.useState)(!1),H=aL[0],bz=aL[1],I=(0,aT.i)(bb.input),bg=Boolean(I&&(null===(v=t.input)|| void 0===v?void 0:v.equalTo(I))),m=null==aD?void 0:aD.executionPrice,$=cb(m,j),_=(0,c.useCallback)(function(a){s(ak.g.INPUT,a)},[s]),aM=(0,c.useCallback)(function(a){s(ak.g.OUTPUT,a)},[s]),bh=(0,c.useCallback)(function(a){bz(!1),aA(ak.g.INPUT,a)},[aA]),bj=(0,c.useCallback)(function(a){s(ak.g.PRICE,a)},[s]),bk=(0,c.useCallback)(function(){I&&s(ak.g.INPUT,I.toExact())},[I,s]),bl=(0,c.useCallback)(function(a){aA(ak.g.OUTPUT,a)},[aA]),bm=(0,c.useCallback)((0,K.Z)(N().mark(function a(){return N().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,bf();case 2:case"end":return a.stop()}},a)})),[bf]),bp=(0,c.useCallback)(function(){aJ&&_("")},[aJ,_]),bq=(0,c.useCallback)(function(){bc===ak.g.INPUT?_(e.input):aM(e.output)},[_,aM,e.input,e.output,bc]),br=(0,c.useCallback)(function(){if(a9){by(function(a){return{attemptingTxn:!0,tradeToConfirm:a.tradeToConfirm,swapErrorMessage:void 0,txHash:void 0}});try{if(!(null===(h=aE.input)|| void 0===h?void 0:h.address))throw Error("Invalid input currency");if(!(null===(i=aE.output)|| void 0===i?void 0:i.address))throw Error("Invalid output currency");if(!aB.input)throw Error("Invalid input amount");if(!aB.output)throw Error("Invalid output amount");if(!ag)throw Error("No account");var h,i,b,c,d=(0,L.Z)(a.input,P.WU)?null===(b=aE.input)|| void 0===b?void 0:b.address:aC.ag,e=(0,L.Z)(a.output,P.WU)?null===(c=aE.output)|| void 0===c?void 0:c.address:aC.ag,f={inputToken:d,outputToken:e,inputAmount:aB.input,outputAmount:aB.output,owner:ag};a9(f).then(function(a){var b=a.hash;by(function(a){return{attemptingTxn:!1,tradeToConfirm:a.tradeToConfirm,swapErrorMessage:void 0,txHash:b}})}).catch(function(a){by(function(b){return{attemptingTxn:!1,tradeToConfirm:b.tradeToConfirm,swapErrorMessage:a.message,txHash:void 0}})})}catch(g){console.error(g)}}},[a9,ag,aB.input,aB.output,a.input,a.output,null===(w=aE.input)|| void 0===w?void 0:w.address,null===(x=aE.output)|| void 0===x?void 0:x.address,]),bs=(0,c.useCallback)(function(){bz(!1),a7()},[a7]),ac=(h=t.input,ar=t.output,as=aH,at=(0,ab.Z)().chainId,o=(0,aQ.Fh)(),au=(0,aP.bM)(o?ay.O$.from(o).mul(aa.q3):"0"),p=(0,ah.Z)(au,P.c0),q=(null==h?void 0:h.currency.symbol)==="MOVO",B=(0,ae.AU)(p,q?null:null==h?void 0:h.currency),aw=(0,c.useMemo)(function(){if(q)return p;if(B&&(null==B?void 0:B.outputAmount)){var a=B.outputAmount.asFraction.multiply(2e3).divide(1e4),b=B.outputAmount.asFraction.add(a),c=b.multiply(P.QA.exponentiate(aa.TY,P.QA.BigInt(B.outputAmount.currency.decimals)));if((0,L.Z)(B.outputAmount.currency,P.WU))return new P.dt(B.outputAmount.currency,c.toFixed(0))}},[B,p,q]),ax=(0,c.useMemo)(function(){return aw&&h&&h.greaterThan(aw)&&h.subtract(aw)},[aw,h]),C=(0,c.useMemo)(function(){return h&&(B||q)&&ax&&ar?q&&p.greaterThan(h.asFraction)?void 0:B&&B.outputAmount.greaterThan(h.asFraction)?void 0:af(ax,ar):null},[ax,ar,h,B,q,p]),az=(0,c.useMemo)(function(){return C?as===ak.j.DIV?C.invert().toSignificant(6):C.toSignificant(6):"never executes"},[as,C]),at?{realExecutionPrice:C,gasPrice:o,realExecutionPriceAsString:az}:{realExecutionPrice:void 0,realExecutionPriceAsString:void 0,gasPrice:void 0}).realExecutionPriceAsString,bt=(0,M.Z)((0,R.Z)((0,J.jsx)(b7,{currencies:a,formattedAmounts:e,currentMarketRate:null==m?void 0:m.toSignificant(4),currentMarketRateInverted:null==m?void 0:m.invert().toSignificant(4),limitPrice:null==j?void 0:j.toSignificant(6),limitPriceInverted:null==j?void 0:j.invert().toSignificant(6),percentageRateDifference:parseFloat(null==$?void 0:$.toSignificant(3)).toLocaleString(void 0,{minimumFractionDigits:0,maximumFractionDigits:3}),onConfirm:br,attemptingTxn:be,txHash:aJ,customOnDismiss:bp,swapErrorMessage:bd}),!0,!0,"confirmLimitOrderModal"),1),bA=bt[0];(0,c.useEffect)(function(){G===aS.UK.PENDING&&bz(!0)},[G,H]);var bu=!l&&(G===aS.UK.NOT_APPROVED||G===aS.UK.PENDING),aN=i||g;return(0,J.jsxs)(bo.Z,{removePadding:i,hideFooterOnDesktop:aN,noMinHeight:!0,helpUrl:aa.vm,children:[(0,J.jsx)(aX,{}),(0,J.jsxs)(f.Z,{width:"100%",justifyContent:"center",position:"relative",mb:aN?null:"24px",mt:i?"24px":null,children:[!A&&(0,J.jsxs)(f.Z,{width:i?"100%":"50%",maxWidth:"928px",flexDirection:"column",children:[(0,J.jsx)(aU.Z,{inputCurrencyId:u.input,inputCurrency:a.input,outputCurrencyId:u.output,outputCurrency:a.output,isChartExpanded:i,setIsChartExpanded:am,isChartDisplayed:g,currentSwapPrice:aF,isFullWidthContainer:!0}),g&&(0,J.jsx)(r.Z,{mb:"48px"}),(0,J.jsx)(r.Z,{width:"100%",children:(0,J.jsx)(b4,{isCompact:aW})})]}),(0,J.jsxs)(f.Z,{flexDirection:"column",alignItems:"center",children:[(0,J.jsx)(a$,{$isChartExpanded:!1,children:(0,J.jsx)(a_,{children:(0,J.jsxs)(Y.j,{children:[(0,J.jsx)(a8,{title:d("Limit"),subtitle:d("Place a limit order to trade at a set price"),setIsChartDisplayed:ao,isChartDisplayed:g}),(0,J.jsxs)(aZ,{id:"limit-order-page",style:{minHeight:"412px"},children:[(0,J.jsxs)(W.Tz,{gap:"sm",children:[(0,J.jsx)(X.Z,{label:d(aG===ak.g.OUTPUT?"From (estimated)":"From"),value:e.input,showMaxButton:!bg,currency:a.input,onUserInput:_,onMax:bk,onCurrencySelect:bh,otherCurrency:a.output,id:"limit-order-currency-input"}),(0,J.jsx)(bn,{handleSwitchTokens:bs,color:a[ak.g.INPUT]&&a[ak.g.OUTPUT]?"primary":"text"}),(0,J.jsx)(X.Z,{value:e.output,onUserInput:aM,label:d(aG===ak.g.INPUT?"To (estimated)":"To"),showMaxButton:!1,currency:a.output,onCurrencySelect:bl,otherCurrency:a.output,id:"limit-order-currency-output"}),(0,J.jsx)(bi,{id:"limit-order-desired-rate-input",value:e.price,onUserInput:bj,inputCurrency:a.input,outputCurrency:a.output,percentageRateDifference:$,rateType:aH,handleRateType:ba,price:j,handleResetToMarketPrice:bq,realExecutionPriceAsString:l?void 0:ac,disabled:!e.input&&!e.output})]}),(0,J.jsx)(r.Z,{mt:"0.25rem",children:ag?bu?(0,J.jsx)(S.Z,{variant:"primary",onClick:bm,id:"enable-order-button",width:"100%",disabled:H,children:H?d("Enabling %asset%",{asset:null===(y=a.input)|| void 0===y?void 0:y.symbol}):d("Enable %asset%",{asset:null===(z=a.input)|| void 0===z?void 0:z.symbol})}):(0,J.jsx)(S.Z,{variant:"primary",onClick:function(){by({tradeToConfirm:aD,attemptingTxn:!1,swapErrorMessage:void 0,txHash:void 0}),bA()},id:"place-order-button",width:"100%",disabled:!!l||"never executes"===ac,children:l||"never executes"===ac?l||d("Can't execute this order"):d("Place an Order")}):(0,J.jsx)(Z.Z,{width:"100%"})}),(0,J.jsx)(f.Z,{mt:"16px",justifyContent:"center",children:(0,J.jsx)(T.Z,{external:!0,href:"https://www.gelato.network/",children:(0,J.jsx)("img",{src:aY.isDark?"/images/powered_by_gelato_white.svg":"/images/powered_by_gelato_black.svg",alt:"Powered by Gelato",width:"170px",height:"48px"})})})]})]})})}),A&&(0,J.jsx)(f.Z,{mt:"24px",width:"100%",children:(0,J.jsx)(b4,{isCompact:!0})})]})]}),(0,J.jsx)(U.Z,{content:(0,J.jsx)(aU.Z,{inputCurrencyId:u.input,inputCurrency:a[ak.g.INPUT],outputCurrencyId:u.output,outputCurrency:a[ak.g.OUTPUT],isChartExpanded:i,setIsChartExpanded:am,isChartDisplayed:g,currentSwapPrice:aF,isMobile:!0}),isOpen:g,setIsOpen:ao})]})},ce=function(){return(0,J.jsx)(cd,{})}}},function(a){a.O(0,[2077,9363,5855,6197,4583,561,5652,3439,7882,9255,9774,2888,179],function(){var b;return a(a.s=84120)}),_N_E=a.O()}])
//# sourceMappingURL=limit-orders-3f9ad9b85f89dc6c.js.map
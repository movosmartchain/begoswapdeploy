"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4437],{44437:function(n,d,a){a.d(d,{Z:function(){return an}});var o=a(47568),p=a(26042),q=a(69396),e=a(34051),r=a.n(e),s=a(85893),t=a(67294),u=a(93293),v=a(31318),w=a(98946),x=a(7180),c=a(4318),f=a(96293),y=a(97114),z=a(48993),A=a(158),B=a(69508),C=a(16863),D=a(86849),E=a(55027),F=a(26710),G=a(99150),H=a(90834),I=a(23917),J=a(71685),K=a(13968),L=a(72818),M=a(7402),N=a(7297),g=a(41609),O=a.n(g),P=a(75186),b=a(87379),h=a(75472),Q=a.n(h),R=a(8074),S=a(28653),T=a(80308),U=a(5324),V=a(16274),W=a(6372),X=a(92510),Y=a(38263),Z=a(22315),$=a(19731),_=function(a){var b=a.item,d=a.isSelected,e=a.onClick;return(0,s.jsxs)(Z.Ak,{alignItems:"center",px:"16px",py:"8px",children:[(0,s.jsx)(y.Z,{style:{flex:1},children:b.label}),(0,s.jsx)(c.Z,{ml:"24px",children:(0,s.jsx)($.Z,{name:"item-select",scale:"sm",onChange:e,checked:d,value:b.collectionAddress})})]})},aa=function(){var a=(0,G.$G)().t,g=(0,t.useState)(!1),r=g[0],u=g[1],h=(0,t.useState)(""),f=h[0],z=h[1],i=(0,t.useState)({orderKey:"label",orderDir:"asc"}),j=i[0],A=i[1],k=(0,K.t8)().data,l=(0,t.useRef)(null),m=(0,t.useRef)(null),B=(0,v.TL)(),b=j.orderKey,d=j.orderDir,w=(0,K.ly)(""),e=w.collectionFilters.length>0,n=(f&&f.length>1?Object.values(k).filter(function(a){return -1!==a.name.toLowerCase().indexOf(f.toLowerCase())}):Object.values(k)).map(function(a){var b=w.collectionFilters.some(function(b){return a.address.toLowerCase()===b.toLowerCase()});return(0,q.Z)((0,p.Z)({},a),{isSelected:b})}),C=function(b,a){b.target.checked?B((0,Y.eN)({collection:a.address.toLowerCase()})):B((0,Y.Rk)({collection:a.address.toLowerCase()}))},o=function(a){return function(){A(function(b){return b.orderKey!==a?{orderKey:a,orderDir:"asc"}:{orderKey:a,orderDir:"asc"===b.orderDir?"desc":"asc"}})}};return(0,t.useEffect)(function(){var a=function(b){var a=b.target;l.current&&m.current&&!m.current.contains(a)&&!l.current.contains(a)&&u(!1)};return document.addEventListener("click",a),function(){document.removeEventListener("click",a)}},[u,l,m]),(0,s.jsxs)(c.Z,{alignItems:"center",mr:"4px",mb:"4px",children:[(0,s.jsx)(x.Z,{ref:l,children:(0,s.jsx)(R.Z,{component:(0,s.jsx)(Z.yR,{onClick:function(){return u(!r)},variant:e?"subtle":"light",scale:"sm",hasItem:e,children:a("Collection")}),isOpen:r,options:{placement:"bottom"},children:(0,s.jsxs)(x.Z,{maxWidth:"375px",ref:m,children:[(0,s.jsx)(Z._8,{alignItems:"center",p:"16px",children:(0,s.jsx)(S.Z,{startIcon:(0,s.jsx)(T.Z,{color:"textSubtle"}),children:(0,s.jsx)(U.Z,{name:"query",placeholder:a("Search"),onChange:function(a){z(a.target.value)},value:f})})}),(0,s.jsxs)(c.Z,{alignItems:"center",p:"16px",children:[(0,s.jsxs)(Z.Lb,{onClick:o("name"),style:{flex:1},children:[(0,s.jsx)(y.Z,{fontSize:"12px",color:"secondary",fontWeight:"bold",textTransform:"uppercase",children:a("Name")}),(0,s.jsxs)(x.Z,{width:"18px",children:["name"===b&&"asc"===d&&(0,s.jsx)(V.Z,{width:"18px",color:"secondary"}),"name"===b&&"desc"===d&&(0,s.jsx)(W.Z,{width:"18px",color:"secondary"})]})]}),(0,s.jsxs)(Z.Lb,{onClick:o("isSelected"),children:[(0,s.jsx)(y.Z,{fontSize:"12px",color:"secondary",fontWeight:"bold",textTransform:"uppercase",children:a("Filter")}),(0,s.jsxs)(x.Z,{width:"18px",children:["isSelected"===b&&"asc"===d&&(0,s.jsx)(V.Z,{width:"18px",color:"secondary"}),"isSelected"===b&&"desc"===d&&(0,s.jsx)(W.Z,{width:"18px",color:"secondary"})]})]})]}),(0,s.jsx)(x.Z,{height:"240px",overflowY:"auto",children:n.length>0?Q()(n,b,d).map(function(a){var b=function(b){return C(b,a)};return(0,s.jsx)(_,{item:{label:a.name,collectionAddress:a.address},isSelected:a.isSelected,onClick:b},a.address)}):(0,s.jsx)(c.Z,{alignItems:"center",justifyContent:"center",height:"230px",children:(0,s.jsx)(y.Z,{color:"textDisabled",textAlign:"center",children:a("No results found")})})})]})})}),e&&(0,s.jsx)(Z.PZ,{variant:e?"subtle":"light",scale:"sm",onClick:function(){B((0,Y.G4)())},children:(0,s.jsx)(X.Z,{color:"currentColor",width:"18px"})})]})},i=a(5527);function j(){var a=(0,N.Z)(["\n  white-space: nowrap;\n  ","\n"]);return j=function(){return a},a}function k(){var a=(0,N.Z)(["\n  border-top-left-radius: 0;\n  border-bottom-left-radius: 0;\n"]);return k=function(){return a},a}var ab=(0,b.ZP)(f.Z).withConfig({componentId:"sc-2f5a2594-0"})(j(),function(a){return a.hasItem&&"  \n    border-top-right-radius: 0;\n    border-bottom-right-radius: 0;\n    padding-right: 8px;\n  "}),ac=(0,b.ZP)(i.Z).withConfig({componentId:"sc-2f5a2594-1"})(k()),ad=function(a,b){switch(b){case P.YG.CANCEL:return a("Delisted");case P.YG.MODIFY:return a("Modified");case P.YG.NEW:return a("Listed");case P.YG.SELL:return a("Sold");default:return""}},ae=function(b){var d=b.eventType,e=b.collectionAddress,f=(0,K.ly)(e),h=(0,v.TL)(),g=(0,G.$G)().t,a=f.typeFilters.some(function(a){return a===d});return(0,s.jsxs)(c.Z,{alignItems:"center",mr:"4px",mb:"4px",children:[(0,s.jsx)(x.Z,{children:(0,s.jsx)(ab,{onClick:function(){a||h((0,Y.I$)({collection:e,field:d}))},variant:a?"subtle":"light",scale:"sm",hasItem:a,children:ad(g,d)})}),a&&(0,s.jsx)(ac,{variant:a?"subtle":"light",scale:"sm",onClick:function(){h((0,Y.QP)({collection:e,field:d}))},children:(0,s.jsx)(X.Z,{color:"currentColor",width:"18px"})})]})},af=a(99534),ag=function(a){var d=a.collectionAddress,b=(0,af.Z)(a,["collectionAddress"]),e=(0,v.TL)(),c=(0,G.$G)().t;return(0,s.jsx)(f.Z,(0,q.Z)((0,p.Z)({variant:"text",scale:"sm",onClick:function(){e((0,Y.MD)(d))},style:{whiteSpace:"nowrap"}},b),{children:c("Clear")}),"clear-all")};function l(){var a=(0,N.Z)(["\n  gap: 16px;\n\n  "," {\n    align-items: center;\n    flex-grow: 2;\n  }\n"]);return l=function(){return a},a}function m(){var a=(0,N.Z)(["\n  align-items: center;\n  flex: 1;\n  flex-wrap: nowrap;\n  overflow-x: auto;\n  -webkit-overflow-scrolling: touch;\n\n  "," {\n    flex-wrap: wrap;\n    overflow-x: revert;\n  }\n"]);return m=function(){return a},a}var ah=(0,b.ZP)(c.Z).withConfig({componentId:"sc-e26df8f1-0"})(l(),function(a){return a.theme.mediaQueries.sm}),ai=(0,b.ZP)(c.Z).withConfig({componentId:"sc-e26df8f1-1"})(m(),function(a){return a.theme.mediaQueries.md}),aj=function(c){var a=c.address,d=(0,G.$G)().t,b=(0,K.ly)(a);return(0,s.jsxs)(ah,{justifyContent:"space-between",flexDirection:["column","column","row"],children:[(0,s.jsx)(y.Z,{textTransform:"uppercase",color:"textSubtle",fontSize:"12px",bold:!0,children:d("Filter by")}),(0,s.jsxs)(ai,{children:[""===a&&(0,s.jsx)(aa,{}),[P.YG.NEW,P.YG.CANCEL,P.YG.MODIFY,P.YG.SELL].map(function(b){return(0,s.jsx)(ae,{eventType:b,collectionAddress:a},b)})]}),O()(b.typeFilters)&&O()(b.collectionFilters)?null:(0,s.jsx)(ag,{collectionAddress:a})]})},ak=a(72855),al=a(11527),am=a(90366),an=function(S){var d=S.collection,T=(0,v.TL)(),h=(d||{address:""}).address,U=(0,K.ly)(h),V=(0,I.ZP)().theme,a=(0,G.$G)().t,i=(0,t.useState)({activity:[],currentPage:1,maxPage:1}),b=i[0],$=i[1],j=(0,t.useState)([]),e=j[0],_=j[1],k=(0,t.useState)([]),W=k[0],aa=k[1],l=(0,t.useState)(!0),m=l[0],ab=l[1],n=(0,t.useState)(!1),X=n[0],ac=n[1],N=(0,t.useState)(1),ad=N[0],ae=N[1],O=(0,J.Z)(),Y=O.lastUpdated,af=O.setLastUpdated,ag=(0,H.Hf)(),g=(0,w.Z)(),P=g.isXs,Q=g.isSm,R=g.isMd,Z=JSON.stringify(U);return(0,t.useEffect)(function(){var a,b=(a=(0,o.Z)(r().mark(function a(){var b,c,d;return r().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,ab(!0),b=JSON.parse(Z),a.next=5,(0,D.Du)(h.toLowerCase(),b,100);case 5:c=a.sent,$({activity:d=(0,al.f)(c),currentPage:1,maxPage:Math.ceil(d.length/8)||1}),ab(!1),ac(!0),a.next=15;break;case 12:a.prev=12,a.t0=a.catch(0),console.error("Failed to fetch collection activity",a.t0);case 15:case"end":return a.stop()}},a,null,[[0,12]])})),function(){return a.apply(this,arguments)});(h&&(0,u.UJ)(h)||""===h)&&b()},[T,h,Z,Y]),(0,t.useEffect)(function(){var a,b=(a=(0,o.Z)(r().mark(function a(){var b;return r().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,(0,am.M)(e);case 2:aa(b=a.sent);case 4:case"end":return a.stop()}},a)})),function(){return a.apply(this,arguments)});e.length>0&&b()},[e]),(0,t.useEffect)(function(){_(b.activity.slice(8*(b.currentPage-1),8*b.currentPage))},[b]),(0,s.jsxs)(x.Z,{py:"32px",children:[(0,s.jsx)(E.Z,{px:[0,null,"24px"],children:(0,s.jsxs)(c.Z,{style:{gap:"16px",padding:"0 16px"},alignItems:[null,null,"center"],flexDirection:["column","column","row"],flexWrap:R?"wrap":"nowrap",children:[(0,s.jsx)(aj,{address:(null==d?void 0:d.address)||""}),(0,s.jsx)(f.Z,{scale:"sm",disabled:m,onClick:function(){af()},width:R&&"100%",children:a("Refresh")})]})}),(0,s.jsx)(E.Z,{style:{overflowX:"auto"},children:0!==b.activity.length||0!==W.length||0!==e.length||m?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(z.Z,{children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{children:[(0,s.jsxs)(A.Th,{textAlign:["center",null,"left"],children:[" ",a("Item")]}),(0,s.jsxs)(A.Th,{textAlign:"right",children:[" ",a("Event")]}),P||Q?null:(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(A.Th,{textAlign:"right",children:[" ",a("Price")]}),(0,s.jsxs)(A.Th,{textAlign:"center",children:[" ",a("From")]}),(0,s.jsxs)(A.Th,{textAlign:"center",children:[" ",a("To")]})]}),(0,s.jsxs)(A.Th,{textAlign:"center",children:[" ",a("Date")]}),P||Q?null:(0,s.jsx)(A.Th,{})]})}),(0,s.jsx)("tbody",{children:X?e.map(function(a){var b=W.find(function(c){var b;return c.tokenId===a.nft.tokenId&&c.collectionAddress.toLowerCase()===(null===(b=a.nft)|| void 0===b?void 0:b.collection.id.toLowerCase())});return(0,s.jsx)(ak.Z,{activity:a,nft:b,bnbBusdPrice:ag},"".concat(a.marketEvent,"#").concat(a.nft.tokenId,"#").concat(a.timestamp,"#").concat(a.tx))}):(0,s.jsx)(F.Z,{})})]}),(0,s.jsx)(c.Z,{borderTop:"1px ".concat(V.colors.cardBorder," solid"),pt:"24px",flexDirection:"column",justifyContent:"space-between",height:"100%",children:(0,s.jsxs)(L.O,{children:[(0,s.jsx)(L.E,{onClick:function(){1!==b.currentPage&&$(function(a){return(0,q.Z)((0,p.Z)({},a),{currentPage:a.currentPage-1})})},children:(0,s.jsx)(B.Z,{color:1===b.currentPage?"textDisabled":"primary"})}),(0,s.jsx)(y.Z,{children:a("Page %page% of %maxPage%",{page:b.currentPage,maxPage:b.maxPage})}),(0,s.jsx)(L.E,{onClick:(0,o.Z)(r().mark(function a(){var c,d,e;return r().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(!(b.currentPage!==b.maxPage)||($(function(a){return(0,q.Z)((0,p.Z)({},a),{currentPage:a.currentPage+1})}),!(b.maxPage-b.currentPage==1&&b.activity.length===100*ad))){a.next=18;break}return a.prev=3,ab(!0),c=JSON.parse(Z),a.next=8,(0,D.Du)(h.toLowerCase(),c,100*(ad+1));case 8:d=a.sent,e=(0,al.f)(d),$(function(a){return(0,q.Z)((0,p.Z)({},a),{activity:e,maxPage:Math.ceil(e.length/8)||1})}),ab(!1),ae(function(a){return a+1}),a.next=18;break;case 15:a.prev=15,a.t0=a.catch(3),console.error("Failed to fetch collection activity",a.t0);case 18:case"end":return a.stop()}},a,null,[[3,15]])})),children:(0,s.jsx)(C.Z,{color:b.currentPage===b.maxPage?"textDisabled":"primary"})})]})})]}):(0,s.jsxs)(c.Z,{p:"24px",flexDirection:"column",alignItems:"center",children:[(0,s.jsx)(M.Z,{}),(0,s.jsx)(y.Z,{pt:"8px",bold:!0,children:a("No NFT market history found")})]})})]})}},90366:function(h,b,a){a.d(b,{M:function(){return o}});var c,d=a(47568),i=a(26042),j=a(69396),k=a(10253),e=a(34051),f=a.n(e),l=a(86849),g=a(45578),m=a.n(g),n=a(40580),o=(c=(0,d.Z)(f().mark(function a(b){var c,d,e,g,h,o;return f().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return c=b.some(function(a){return a.nft.collection.id.toLowerCase()===n.J.toLowerCase()}),d=m()(b.filter(function(a){return a.nft.collection.id.toLowerCase()!==n.J.toLowerCase()}).map(function(a){return{tokenId:a.nft.tokenId,collectionAddress:a.nft.collection.id}}),function(a){return"".concat(a.tokenId,"#").concat(a.collectionAddress)}),a.t0=k.Z,a.next=5,Promise.all([c?(0,l.Rq)(n.J):Promise.resolve(null),(0,l._C)(d),]);case 5:return a.t1=a.sent,g=(e=(0,a.t0)(a.t1,2))[0],h=e[1],o=g?b.filter(function(a){return a.nft.collection.id.toLowerCase()===n.J.toLowerCase()}).map(function(a){var b=g.data[a.nft.otherId].collection.name;return(0,j.Z)((0,i.Z)({},g.data[a.nft.otherId]),{tokenId:a.nft.tokenId,attributes:[{traitType:"bunnyId",value:a.nft.otherId}],collectionAddress:a.nft.collection.id,collectionName:b})}):[],a.abrupt("return",h.concat(o));case 11:case"end":return a.stop()}},a)})),function(a){return c.apply(this,arguments)})},11527:function(d,b,a){a.d(b,{f:function(){return h}});var e=a(29815),f=a(75186),c=a(75472),g=a.n(c),h=function(a){var h,i,b=a.askOrders,c=a.transactions,j=function(a){switch(a){case f.cP.CANCEL:return f.YG.CANCEL;case f.cP.MODIFY:return f.YG.MODIFY;case f.cP.NEW:return f.YG.NEW;default:return f.YG.MODIFY}},d=(0,e.Z)((h=void 0===b?[]:b).map(function(a){var b=j(a.orderType),c=a.askPrice,d=a.timestamp,e=a.nft,f=a.id,g=null==a?void 0:a.seller.id;return{marketEvent:b,price:c,timestamp:d,nft:e,tx:f,seller:g}})).concat((0,e.Z)((i=void 0===c?[]:c).map(function(a){var b=f.YG.SELL,c=a.timestamp,d=a.nft,e=a.askPrice,g=a.id,h=a.buyer.id,i=a.seller.id;return{marketEvent:b,price:e,timestamp:c,nft:d,tx:g,buyer:h,seller:i}})));return d.length>0?g()(d,function(a){return parseInt(a.timestamp,10)},"desc"):[]}},7402:function(f,b,a){var g=a(7297),c=a(87379);function d(){var a=(0,g.Z)(["\n  background: url('/images/nfts/no-profile-md.png');\n  background-repeat: no-repeat;\n  background-size: cover;\n  border-radius: 50%;\n  position: relative;\n  width: 96px;\n  height: 96px;\n\n  & > img {\n    border-radius: 50%;\n  }\n"]);return d=function(){return a},a}var e=c.ZP.div.withConfig({componentId:"sc-56593911-0"})(d());b.Z=e}}])
//# sourceMappingURL=4437-19553f1cb0ce9ae2.js.map